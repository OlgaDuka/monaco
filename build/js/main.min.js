"use strict";var headerFormSelect=".header__search",footerFormSelect=".footer__search";function getNoun(e,t,a,r){var i=e;return e=Math.abs(e),5<=(e%=100)&&e<=20?i+" "+r:1===(e%=10)?i+" "+t:2<=e&&e<=4?i+" "+a:i+" "+r}function makeForm(o){var e=new Date,t=new Date,a=new Date;t.setDate(t.getDate()+1),a.setDate(a.getDate()+2),$("".concat(o," .check-calendar")).datepicker({minDate:e,toggleSelected:!1,dateFormat:"d, MM",position:"bottom center",onSelect:function(e,t,a){if(""===t)a.$el.val("Выберите дату");else{var r=moment(t).format("DD MMMM");a.$el.attr("value",r),a.$el.val(r)}var i=new Date(t);i.setDate(i.getDate()+1);var s=$("".concat(o," .eviction-calendar")).datepicker().data("datepicker");t>=s.date?(s.update("minDate",i),s.selectDate(i),$("".concat(o," .eviction-calendar")).val(moment(i).format("DD MMMM")),$("".concat(o," .eviction-calendar")).attr("value",moment(i).format("DD MMMM"))):(s.update("minDate",i),$("".concat(o," .eviction-calendar")).val(moment(s.date).format("DD MMMM")),$("".concat(o," .eviction-calendar")).attr("value",moment(s.date).format("DD MMMM")))}}),$("".concat(o," .eviction-calendar")).datepicker({minDate:a,toggleSelected:!1,dateFormat:"d, MM",position:"bottom center",onSelect:function(e,t,a){if(""===t)a.$el.val("Выберите дату");else{var r=moment(t).format("DD MMMM");a.$el.attr("value",r),a.$el.val(r)}}});var r=moment();r.locale("ru"),$("".concat(o," .check-calendar")).attr("value",moment(r).add(1,"days").format("DD MMMM")),$("".concat(o," .eviction-calendar")).attr("value",moment(r).add(2,"days").format("DD MMMM")),$("".concat(o," .check-calendar")).datepicker().data("datepicker").selectDate(t),$("".concat(o," .eviction-calendar")).datepicker().data("datepicker").selectDate(a);var i=!1;$("".concat(o," .guest")).click(function(e){i||($("".concat(o," .search__guest-change")).fadeToggle(200),i=!0)}),$(document).mouseup(function(e){var t=$("".concat(o," .search__guest-change"));0===t.has(e.target).length&&i&&(t.fadeOut(),setTimeout(function(){i=!1},200))});var s=$("".concat(o," .adult-sum")),n=$("".concat(o," .adult-plus")),c=$("".concat(o," .adult-minus"));n.click(function(e){var t=s.text();t<6&&(t++,s.text(t)),u()}),c.click(function(e){var t=s.text();1<t&&(t--,s.text(t)),u()});var l=$("".concat(o," .child-sum")),d=$("".concat(o," .child-plus")),m=$("".concat(o," .child-minus"));function u(){var e=parseInt(s.text())+parseInt(l.text()),t=getNoun(e,"гостя","гостей","гостей");return $("".concat(o," .full-sum")).text(t),1===parseInt(s.text())?c.attr("disabled",!0):c.attr("disabled",!1),6===parseInt(s.text())?n.attr("disabled",!0):n.attr("disabled",!1),0===parseInt(l.text())?m.attr("disabled",!0):m.attr("disabled",!1),5===parseInt(l.text())?d.attr("disabled",!0):d.attr("disabled",!1),e}d.click(function(e){var t=l.text();t<5&&(t++,l.text(t)),u()}),m.click(function(e){var t=l.text();0<t&&(t--,l.text(t)),u()}),$("".concat(o," .check")).click(function(e){$("".concat(o," .check-calendar")).data("datepicker").show()}),$("".concat(o," .eviction")).click(function(e){$("".concat(o," .eviction-calendar")).data("datepicker").show()}),$("".concat(o," .search__goto")).click(function(e){var t=$("".concat(o," .check-calendar")).data("datepicker").selectedDates,a=$("".concat(o," .eviction-calendar")).data("datepicker").selectedDates,r=u(),i=moment(t[0]).format("DD.MM.YYYY"),s=moment(a[0]).format("DD.MM.YYYY"),n="https://ostrovok.ru/hotel/united_arab_emirates/abu_dhabi/?q=453&dates=".concat(i,"-").concat(s,"&guests=").concat(r);window.open(n,"_blank")})}makeForm(headerFormSelect),makeForm(footerFormSelect);var feed=new Instafeed({get:"user",userId:14110486070,accessToken:"14110486070.1677ed0.e29f390d542548cc9d383954ff2b2f3a",target:"Instafeed",resolution:"thumbnail",limit:50,template:'<li><img src="{{image}}" /></li>'});feed.run();var limit=$(window).height()/4,backToTop=$("#up-btn");$(window).scroll(function(){$(this).scrollTop()>limit?backToTop.fadeIn():backToTop.fadeOut()}),backToTop.click(function(){return $("body, html").animate({scrollTop:0},100),!1});var TABLET_WIDTH=767,DESKTOP_WIDTH=1189;$(".advantages__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:"unslick"}]}),$(".transport__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:"unslick"}]}),$(".lifehack__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:"unslick"}]}),$(".stop__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:"unslick"}]}),$(".details__slider-for").slick({slidesToShow:1,slidesToScroll:1,initialSlide:2,centerMode:!1,dots:!0,arrows:!1,asNavFor:".details__slider-nav",mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:{slidesToShow:1,centerMode:!0,variableWidth:!0}}]}),$(".details__slider-nav").slick({slidesToShow:4,slidesToScroll:1,initialSlide:2,dots:!1,asNavFor:".details__slider-for",focusOnSelect:!0,variableWidth:!0,mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:{slidesToShow:6,dots:!0}}]});var setSlickParameters=function(e,t){return{mobileFirst:!0,infinite:!0,slidesToShow:1,slidesToScroll:1,variableWidth:!0,dots:!1,prevArrow:$(e),nextArrow:$(t),responsive:[{breakpoint:TABLET_WIDTH,settings:{centerMode:!1}},{breakpoint:DESKTOP_WIDTH,settings:{slidesToShow:1}}]}},better1=setSlickParameters(".better__arrow--prev1",".better__arrow--next1"),better2=setSlickParameters(".better__arrow--prev2",".better__arrow--next2"),better3=setSlickParameters(".better__arrow--prev3",".better__arrow--next3"),better4=setSlickParameters(".better__arrow--prev4",".better__arrow--next4");$(".better__slider--1").slick(better1),$(".better__slider--2").slick(better2),$(".better__slider--3").slick(better3),$(".better__slider--4").slick(better4),$('.better__menu-item[data-num="1"]').find('.better__submenu-item[data-subnum="0"]').addClass("better__submenu-item--active");var toggleSubmenu=function(e,t,a){$('.better__menu-item[data-num="'+a+'"]').find('.better__submenu-item[data-subnum="'+e+'"]').removeClass("better__submenu-item--active"),$('.better__menu-item[data-num="'+a+'"]').find('.better__submenu-item[data-subnum="'+t+'"]').addClass("better__submenu-item--active")};function beforeChangeHandler(e,t,a,r){var i=t.$slider.data().num;toggleSubmenu(a,r,i)}$(".better__menu-item").click(function(e){if(!$(this).hasClass("better__menu-item--active")){var t=$(this).data().num,a=$('.better__slider[data-num="'+t+'"]'),r=$('.better__controls[data-num="'+t+'"]');$(".better").find(".better__slider--active").off("beforeChange",beforeChangeHandler),a.on("beforeChange",beforeChangeHandler),$(".better").find(".better__slider--active").removeClass("better__slider--active"),$(".better").find(".better__menu-item--active").removeClass("better__menu-item--active"),$(".better").find(".better__submenu-item--active").removeClass("better__submenu-item--active"),$(".better").find(".better__controls--active").removeClass("better__controls--active"),$(this).addClass("better__menu-item--active"),a.addClass("better__slider--active"),r.addClass("better__controls--active"),$(".better").find(".better__slider--active").slick("slickGoTo",0),$('.better__menu-item[data-num="'+t+'"]').find('.better__submenu-item[data-subnum="0"]').addClass("better__submenu-item--active"),a.slick("refresh")}}),$(".better__submenu-item").click(function(e){if(!$(this).hasClass("better__submenu-item--active")){var t=$(this).data().subnum;$(".better").find(".better__slider--active").slick("slickGoTo",t),$(".better").find(".better__submenu-item--active").removeClass("better__submenu-item--active"),$(this).addClass("better__submenu-item--active")}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm0uanMiLCJpbnN0YS5qcyIsInNjcm9sbC5qcyIsInNsaWRlci5qcyJdLCJuYW1lcyI6WyJoZWFkZXJGb3JtU2VsZWN0IiwiZm9vdGVyRm9ybVNlbGVjdCIsImdldE5vdW4iLCJudW1iZXIiLCJvbmUiLCJ0d28iLCJmaXZlIiwiaW5pdE51bWJlciIsIk1hdGgiLCJhYnMiLCJtYWtlRm9ybSIsInNlbGVjdGlvbiIsImN1ckRhdGUiLCJEYXRlIiwiY2hlY2tEYXkiLCJldmljdERheSIsInNldERhdGUiLCJnZXREYXRlIiwiJCIsImNvbmNhdCIsImRhdGVwaWNrZXIiLCJtaW5EYXRlIiwidG9nZ2xlU2VsZWN0ZWQiLCJkYXRlRm9ybWF0IiwicG9zaXRpb24iLCJvblNlbGVjdCIsImZkIiwiZCIsInBpY2tlcnMiLCIkZWwiLCJ2YWwiLCJkYXRlIiwibW9tZW50IiwiZm9ybWF0IiwiYXR0ciIsInVwZE1pbiIsImRhdGEiLCJ1cGRhdGUiLCJzZWxlY3REYXRlIiwiZGVmRGF5IiwibG9jYWxlIiwiYWRkIiwib3BlbmVkIiwiY2xpY2siLCJlIiwiZmFkZVRvZ2dsZSIsImRvY3VtZW50IiwibW91c2V1cCIsImNvbnRhaW5lciIsImhhcyIsInRhcmdldCIsImxlbmd0aCIsImZhZGVPdXQiLCJzZXRUaW1lb3V0IiwiYWR1bHRTdW0iLCJhZHVsdFBsdXMiLCJhZHVsdE1pbnVzIiwibnVtIiwidGV4dCIsImNhbGNTdW1PZkd1ZXN0cyIsImNoaWxkU3VtIiwiY2hpbGRQbHVzIiwiY2hpbGRNaW51cyIsImZ1bGxTdW0iLCJwYXJzZUludCIsImNvbmNhdFN0cmluZyIsInNob3ciLCJjaGVja0RhdGEiLCJzZWxlY3RlZERhdGVzIiwiZXZpY3REYXRhIiwiZ3Vlc3RzIiwiZm9ybWF0ZWRDaGVjayIsImZvcm1hdGVkRXZpY3QiLCJjb21wYXJlU3RyaW5nIiwid2luZG93Iiwib3BlbiIsImZlZWQiLCJJbnN0YWZlZWQiLCJnZXQiLCJ1c2VySWQiLCJhY2Nlc3NUb2tlbiIsInJlc29sdXRpb24iLCJsaW1pdCIsInRlbXBsYXRlIiwicnVuIiwiaGVpZ2h0IiwiYmFja1RvVG9wIiwic2Nyb2xsIiwidGhpcyIsInNjcm9sbFRvcCIsImZhZGVJbiIsImFuaW1hdGUiLCJUQUJMRVRfV0lEVEgiLCJERVNLVE9QX1dJRFRIIiwic2xpY2siLCJzbGlkZXNUb1Nob3ciLCJzbGlkZXNUb1Njcm9sbCIsImFycm93cyIsImRvdHMiLCJtb2JpbGVGaXJzdCIsInJlc3BvbnNpdmUiLCJicmVha3BvaW50Iiwic2V0dGluZ3MiLCJpbml0aWFsU2xpZGUiLCJjZW50ZXJNb2RlIiwiYXNOYXZGb3IiLCJ2YXJpYWJsZVdpZHRoIiwiZm9jdXNPblNlbGVjdCIsInNldFNsaWNrUGFyYW1ldGVycyIsImFycm93UHJldiIsImFycm93TmV4dCIsImluZmluaXRlIiwicHJldkFycm93IiwibmV4dEFycm93IiwiYmV0dGVyMSIsImJldHRlcjIiLCJiZXR0ZXIzIiwiYmV0dGVyNCIsImZpbmQiLCJhZGRDbGFzcyIsInRvZ2dsZVN1Ym1lbnUiLCJudW1DdXJyZW50U2xpZGUiLCJudW1OZXh0U2xpZGUiLCJudW1TbGlkZXIiLCJyZW1vdmVDbGFzcyIsImJlZm9yZUNoYW5nZUhhbmRsZXIiLCJldmVudCIsImN1cnJlbnRTbGlkZSIsIm5leHRTbGlkZSIsIiRzbGlkZXIiLCJldnQiLCJoYXNDbGFzcyIsIm1lbnVJdGVtIiwidGFyZ2V0U2xpZGVyIiwidGFyZ2V0Q29udHJvbCIsIm9mZiIsIm9uIiwic3VibWVudUl0ZW0iLCJzdWJudW0iXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLGlCQUFBLGtCQUNBQyxpQkFBQSxrQkFNQSxTQUFBQyxRQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBLElBQUFDLEVBQUFKLEVBR0EsT0FGQUEsRUFBQUssS0FBQUMsSUFBQU4sR0FFQSxJQURBQSxHQUFBLE1BQ0FBLEdBQUEsR0FDQUksRUFBQSxJQUFBRCxFQUdBLEtBREFILEdBQUEsSUFFQUksRUFBQSxJQUFBSCxFQUVBLEdBQUFELEdB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RUFsSCxFQUFBLFdBQUFvRyxLQUFBLDJCQUFBaUIsSUFBQSxlQUFBVixxQkFDQVEsRUFBQUcsR0FBQSxlQUFBWCxxQkFFQTNHLEVBQUEsV0FBQW9HLEtBQUEsMkJBQUFNLFlBQUEsMEJBQ0ExRyxFQUFBLFdBQUFvRyxLQUFBLDhCQUFBTSxZQUFBLDZCQUNBMUcsRUFBQSxXQUFBb0csS0FBQSxpQ0FBQU0sWUFBQSxnQ0FDQTFHLEVBQUEsV0FBQW9HLEtBQUEsNkJBQUFNLFlBQUEsNEJBRUExRyxFQUFBc0UsTUFBQStCLFNBQUEsNkJBQ0FjLEVBQUFkLFNBQUEsMEJBQ0FlLEVBQUFmLFNBQUEsNEJBQ0FyRyxFQUFBLFdBQUFvRyxLQUFBLDJCQUFBeEIsTUFBQSxZQUFBLEdBRUE1RSxFQUFBLGdDQUFBa0gsRUFBQSxNQUFBZCxLQUFBLDBDQUFBQyxTQUFBLGdDQUNBYyxFQUFBdkMsTUFBQSxjQUlBNUUsRUFBQSx5QkFBQXlCLE1BQUEsU0FBQXVGLEdBQ0EsSUFBQWhILEVBQUFzRSxNQUFBMkMsU0FBQSxnQ0FBQSxDQUdBLElBQUFNLEVBQUF2SCxFQUFBc0UsTUFBQXBELE9BQUFzRyxPQUVBeEgsRUFBQSxXQUFBb0csS0FBQSwyQkFBQXhCLE1BQUEsWUFBQTJDLEdBRUF2SCxFQUFBLFdBQUFvRyxLQUFBLGlDQUFBTSxZQUFBLGdDQUNBMUcsRUFBQXNFLE1BQUErQixTQUFBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgIC8vINCk0L7RgNC80LjRgNGD0LXQvCDRhNC+0YDQvNGLINC30LDQutCw0LfRi1xuICBjb25zdCBoZWFkZXJGb3JtU2VsZWN0ID0gJy5oZWFkZXJfX3NlYXJjaCc7XG4gIGNvbnN0IGZvb3RlckZvcm1TZWxlY3QgPSAnLmZvb3Rlcl9fc2VhcmNoJztcblxuICBtYWtlRm9ybShoZWFkZXJGb3JtU2VsZWN0KTtcbiAgbWFrZUZvcm0oZm9vdGVyRm9ybVNlbGVjdCk7XG5cbi8vINCh0LrQu9C+0L3QtdC90LjQtVxuZnVuY3Rpb24gZ2V0Tm91bihudW1iZXIsIG9uZSwgdHdvLCBmaXZlKSB7XG4gIGNvbnN0IGluaXROdW1iZXIgPSBudW1iZXJcbiAgbnVtYmVyID0gTWF0aC5hYnMobnVtYmVyKVxuICBudW1iZXIgJT0gMTAwXG4gIGlmIChudW1iZXIgPj0gNSAmJiBudW1iZXIgPD0gMjApIHtcbiAgICByZXR1cm4gaW5pdE51bWJlciArICcgJyArIGZpdmVcbiAgfVxuICBudW1iZXIgJT0gMTBcbiAgaWYgKG51bWJlciA9PT0gMSkge1xuICAgIHJldHVybiBpbml0TnVtYmVyICsgJyAnICsgb25lXG4gIH1cbiAgaWYgKG51bWJlciA+PSAyICYmIG51bWJlciA8PSA0KSB7XG4gICAgcmV0dXJuIGluaXROdW1iZXIgKyAnICcgKyB0d29cbiAgfVxuICByZXR1cm4gaW5pdE51bWJlciArICcgJyArIGZpdmVcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgINCk0L7RgNC80LAg0L/QvtC40YHQutCwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuXG4gIGZ1bmN0aW9uIG1ha2VGb3JtKHNlbGVjdGlvbikge1xuICAgIGNvbnN0IGN1ckRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IGNoZWNrRGF5ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBldmljdERheSA9IG5ldyBEYXRlKCk7XG4gICAgY2hlY2tEYXkuc2V0RGF0ZShjaGVja0RheS5nZXREYXRlKCkgKyAxKTtcbiAgICBldmljdERheS5zZXREYXRlKGV2aWN0RGF5LmdldERhdGUoKSArIDIpO1xuXG4gICAgLy8gKioqKioqKioqKioqKioqICoq0KHQuNC90YXRgNC+0L3QuNC30LDRhtC40Y8g0LrQsNC70LXQvdC00LDRgNC10LkgKioqKioqKioqKioqKioqKioqKioqKioqIC8vXG4gICAgJChgJHtzZWxlY3Rpb259IC5jaGVjay1jYWxlbmRhcmApLmRhdGVwaWNrZXIoe1xuICAgICAgbWluRGF0ZTogY3VyRGF0ZSxcbiAgICAgIHRvZ2dsZVNlbGVjdGVkOiBmYWxzZSxcbiAgICAgIGRhdGVGb3JtYXQ6ICdkLCBNTScsXG4gICAgICBwb3NpdGlvbjogXCJib3R0b20gY2VudGVyXCIsXG4gICAgICBvblNlbGVjdDogZnVuY3Rpb24gKGZkLCBkLCBwaWNrZXJzKSB7XG4gICAgICAgIGlmIChkID09PSAnJykge1xuICAgICAgICAgIHBpY2tlcnMuJGVsLnZhbCgn0JLRi9Cx0LXRgNC40YLQtSDQtNCw0YLRgycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGRhdGUgPSBtb21lbnQoZCkuZm9ybWF0KCdERCBNTU1NJyk7XG4gICAgICAgICAgcGlja2Vycy4kZWwuYXR0cigndmFsdWUnLCBkYXRlKTtcbiAgICAgICAgICBwaWNrZXJzLiRlbC52YWwoZGF0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1cGRNaW4gPSBuZXcgRGF0ZShkKTtcbiAgICAgICAgdXBkTWluLnNldERhdGUodXBkTWluLmdldERhdGUoKSArIDEpO1xuXG4gICAgICAgIC8vINCc0LXQvdGP0LXQvCDQvNC40L0g0LfQvdCw0YfQtdC90LjQtSDQsiDQutCw0LvQtdC90LTQsNGA0LUg0LLRi9GB0LXQu9C10L3QuNGPXG4gICAgICAgIGNvbnN0IGRhdGVwaWNrZXIgPSAkKGAke3NlbGVjdGlvbn0gLmV2aWN0aW9uLWNhbGVuZGFyYCkuZGF0ZXBpY2tlcigpLmRhdGEoJ2RhdGVwaWNrZXInKTtcblxuICAgICAgICBpZiAoZCA+PSBkYXRlcGlja2VyLmRhdGUpIHtcbiAgICAgICAgICBkYXRlcGlja2VyLnVwZGF0ZSgnbWluRGF0ZScsIHVwZE1pbik7XG4gICAgICAgICAgZGF0ZXBpY2tlci5zZWxlY3REYXRlKHVwZE1pbik7XG4gICAgICAgICAgJChgJHtzZWxlY3Rpb259IC5ldmljdGlvbi1jYWxlbmRhcmApLnZhbChtb21lbnQodXBkTWluKS5mb3JtYXQoJ0REIE1NTU0nKSlcbiAgICAgICAgICAkKGAke3NlbGVjdGlvbn0gLmV2aWN0aW9uLWNhbGVuZGFyYCkuYXR0cigndmFsdWUnLCBtb21lbnQodXBkTWluKS5mb3JtYXQoJ0REIE1NTU0nKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYXRlcGlja2VyLnVwZGF0ZSgnbWluRGF0ZScsIHVwZE1pbik7XG4gICAgICAgICAgJChgJHtzZWxlY3Rpb259IC5ldmljdGlvbi1jYWxlbmRhcmApLnZhbChtb21lbnQoZGF0ZXBpY2tlci5kYXRlKS5mb3JtYXQoJ0REIE1NTU0nKSlcbiAgICAgICAgICAkKGAke3NlbGVjdGlvbn0gLmV2aWN0aW9uLWNhbGVuZGFyYCkuYXR0cigndmFsdWUnLCBtb21lbnQoZGF0ZXBpY2tlci5kYXRlKS5mb3JtYXQoJ0REIE1NTU0nKSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgJChgJHtzZWxlY3Rpb259IC5ldmljdGlvbi1jYWxlbmRhcmApLmRhdGVwaWNrZXIoe1xuICAgICAgbWluRGF0ZTogZXZpY3REYXksXG4gICAgICB0b2dnbGVTZWxlY3RlZDogZmFsc2UsXG4gICAgICBkYXRlRm9ybWF0OiAnZCwgTU0nLFxuICAgICAgcG9zaXRpb246IFwiYm90dG9tIGNlbnRlclwiLFxuICAgICAgb25TZWxlY3Q6IGZ1bmN0aW9uIChmZCwgZCwgcGlja2Vycykge1xuICAgICAgICBpZiAoZCA9PT0gJycpIHtcbiAgICAgICAgICBwaWNrZXJzLiRlbC52YWwoJ9CS0YvQsdC10YDQuNGC0LUg0LTQsNGC0YMnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBkYXRlID0gbW9tZW50KGQpLmZvcm1hdCgnREQgTU1NTScpO1xuICAgICAgICAgIHBpY2tlcnMuJGVsLmF0dHIoJ3ZhbHVlJywgZGF0ZSk7XG4gICAgICAgICAgcGlja2Vycy4kZWwudmFsKGRhdGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAvL1xuXG4gICAgLy8g0JfQvdCw0YfQtdC90LjRjyDQv9C+LdGD0LzQvtC70YfQsNC90LjRjlxuICAgIGNvbnN0IGRlZkRheSA9IG1vbWVudCgpO1xuXG4gICAgZGVmRGF5LmxvY2FsZSgncnUnKVxuICAgICQoYCR7c2VsZWN0aW9ufSAuY2hlY2stY2FsZW5kYXJgKS5hdHRyKCd2YWx1ZScsIG1vbWVudChkZWZEYXkpLmFkZCgxLCAnZGF5cycpLmZvcm1hdCgnREQgTU1NTScpKTtcbiAgICAkKGAke3NlbGVjdGlvbn0gLmV2aWN0aW9uLWNhbGVuZGFyYCkuYXR0cigndmFsdWUnLCBtb21lbnQoZGVmRGF5KS5hZGQoMiwgJ2RheXMnKS5mb3JtYXQoJ0REIE1NTU0nKSk7XG5cblxuICAgIGNvbnN0IGNoZWNrQ2FsZW5kYXIgPSAkKGAke3NlbGVjdGlvbn0gLmNoZWNrLWNhbGVuZGFyYCkuZGF0ZXBpY2tlcigpLmRhdGEoJ2RhdGVwaWNrZXInKTtcbiAgICBjaGVja0NhbGVuZGFyLnNlbGVjdERhdGUoY2hlY2tEYXkpO1xuXG4gICAgY29uc3QgZXZpY3Rpb25DYWxlbmRhciA9ICQoYCR7c2VsZWN0aW9ufSAuZXZpY3Rpb24tY2FsZW5kYXJgKS5kYXRlcGlja2VyKCkuZGF0YSgnZGF0ZXBpY2tlcicpO1xuICAgIGV2aWN0aW9uQ2FsZW5kYXIuc2VsZWN0RGF0ZShldmljdERheSk7XG5cbiAgICAvLyAqKioqKioqKioqKiog0JrQvtC70LjRh9C10YHRgtCy0L4g0LPQvtGB0YLQtdC5ICoqKioqKioqKioqKioqKiogLy9cbiAgICAvLyDQktGL0L/QsNC00LDRjtGJ0LXQtSDQvNC10L3RjlxuICAgIGxldCBvcGVuZWQgPSBmYWxzZTtcblxuICAgICQoYCR7c2VsZWN0aW9ufSAuZ3Vlc3RgKS5jbGljaygoZSkgPT4ge1xuICAgICAgaWYgKCFvcGVuZWQpIHtcbiAgICAgICAgJChgJHtzZWxlY3Rpb259IC5zZWFyY2hfX2d1ZXN0LWNoYW5nZWApLmZhZGVUb2dnbGUoMjAwKTtcbiAgICAgICAgb3BlbmVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8g0KHQutGA0YvRgtC40LUg0L/RgNC4INC60LvQuNC60LUg0LLQvdC1INC+0LrQvdCwXG4gICAgJChkb2N1bWVudCkubW91c2V1cChmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIGNvbnRhaW5lciA9ICQoYCR7c2VsZWN0aW9ufSAuc2VhcmNoX19ndWVzdC1jaGFuZ2VgKTtcbiAgICAgIGlmIChjb250YWluZXIuaGFzKGUudGFyZ2V0KS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaWYgKG9wZW5lZCkge1xuICAgICAgICAgIGNvbnRhaW5lci5mYWRlT3V0KCk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBvcGVuZWQgPSBmYWxzZTtcbiAgICAgICAgICB9LCAyMDApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vINCS0LfRgNC+0YHQu9GL0LVcbiAgICBjb25zdCBhZHVsdFN1bSA9ICQoYCR7c2VsZWN0aW9ufSAuYWR1bHQtc3VtYCk7XG4gICAgY29uc3QgYWR1bHRQbHVzID0gJChgJHtzZWxlY3Rpb259IC5hZHVsdC1wbHVzYCk7XG4gICAgY29uc3QgYWR1bHRNaW51cyA9ICQoYCR7c2VsZWN0aW9ufSAuYWR1bHQtbWludXNgKTtcblxuICAgIGFkdWx0UGx1cy5jbGljaygoZSkgPT4ge1xuICAgICAgbGV0IG51bSA9IGFkdWx0U3VtLnRleHQoKVxuICAgICAgaWYgKG51bSA8IDYpIHtcbiAgICAgICAgbnVtKys7XG4gICAgICAgIGFkdWx0U3VtLnRleHQobnVtKVxuICAgICAgfVxuXG4gICAgICBjYWxjU3VtT2ZHdWVzdHMoKTtcbiAgICB9KTtcblxuICAgIGFkdWx0TWludXMuY2xpY2soKGUpID0+IHtcbiAgICAgIGxldCBudW0gPSBhZHVsdFN1bS50ZXh0KClcbiAgICAgIGlmIChudW0gPiAxKSB7XG4gICAgICAgIG51bS0tO1xuICAgICAgICBhZHVsdFN1bS50ZXh0KG51bSlcbiAgICAgIH1cblxuICAgICAgY2FsY1N1bU9mR3Vlc3RzKCk7XG4gICAgfSk7XG5cbiAgICAvLyDQlNC10YLQuFxuICAgIGNvbnN0IGNoaWxkU3VtID0gJChgJHtzZWxlY3Rpb259IC5jaGlsZC1zdW1gKTtcbiAgICBjb25zdCBjaGlsZFBsdXMgPSAkKGAke3NlbGVjdGlvbn0gLmNoaWxkLXBsdXNgKTtcbiAgICBjb25zdCBjaGlsZE1pbnVzID0gJChgJHtzZWxlY3Rpb259IC5jaGlsZC1taW51c2ApO1xuXG4gICAgY2hpbGRQbHVzLmNsaWNrKChlKSA9PiB7XG4gICAgICBsZXQgbnVtID0gY2hpbGRTdW0udGV4dCgpXG4gICAgICBpZiAobnVtIDwgNSkge1xuICAgICAgICBudW0rKztcbiAgICAgICAgY2hpbGRTdW0udGV4dChudW0pXG4gICAgICB9XG5cbiAgICAgIGNhbGNTdW1PZkd1ZXN0cygpO1xuICAgIH0pO1xuXG4gICAgY2hpbGRNaW51cy5jbGljaygoZSkgPT4ge1xuICAgICAgbGV0IG51bSA9IGNoaWxkU3VtLnRleHQoKVxuICAgICAgaWYgKG51bSA+IDApIHtcbiAgICAgICAgbnVtLS07XG4gICAgICAgIGNoaWxkU3VtLnRleHQobnVtKVxuICAgICAgfVxuXG4gICAgICBjYWxjU3VtT2ZHdWVzdHMoKTtcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIGNhbGNTdW1PZkd1ZXN0cygpIHtcbiAgICAgIGNvbnN0IGZ1bGxTdW0gPSBwYXJzZUludChhZHVsdFN1bS50ZXh0KCkpICsgcGFyc2VJbnQoY2hpbGRTdW0udGV4dCgpKTtcbiAgICAgIGNvbnN0IGNvbmNhdFN0cmluZyA9IGdldE5vdW4oZnVsbFN1bSwgJ9Cz0L7RgdGC0Y8nLCAn0LPQvtGB0YLQtdC5JywgJ9Cz0L7RgdGC0LXQuScpO1xuICAgICAgJChgJHtzZWxlY3Rpb259IC5mdWxsLXN1bWApLnRleHQoY29uY2F0U3RyaW5nKTtcblxuICAgICAgaWYgKHBhcnNlSW50KGFkdWx0U3VtLnRleHQoKSkgPT09IDEpIHtcbiAgICAgICAgYWR1bHRNaW51cy5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWR1bHRNaW51cy5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcnNlSW50KGFkdWx0U3VtLnRleHQoKSkgPT09IDYpIHtcbiAgICAgICAgYWR1bHRQbHVzLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhZHVsdFBsdXMuYXR0cignZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJzZUludChjaGlsZFN1bS50ZXh0KCkpID09PSAwKSB7XG4gICAgICAgIGNoaWxkTWludXMuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoaWxkTWludXMuYXR0cignZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJzZUludChjaGlsZFN1bS50ZXh0KCkpID09PSA1KSB7XG4gICAgICAgIGNoaWxkUGx1cy5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hpbGRQbHVzLmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZnVsbFN1bVxuICAgIH1cblxuXG4gICAgJChgJHtzZWxlY3Rpb259IC5jaGVja2ApLmNsaWNrKChlKSA9PiB7XG4gICAgICAkKGAke3NlbGVjdGlvbn0gLmNoZWNrLWNhbGVuZGFyYCkuZGF0YSgnZGF0ZXBpY2tlcicpLnNob3coKTtcbiAgICB9KVxuXG4gICAgJChgJHtzZWxlY3Rpb259IC5ldmljdGlvbmApLmNsaWNrKChlKSA9PiB7XG4gICAgICAkKGAke3NlbGVjdGlvbn0gLmV2aWN0aW9uLWNhbGVuZGFyYCkuZGF0YSgnZGF0ZXBpY2tlcicpLnNob3coKTtcbiAgICB9KVxuXG4gICAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAvL1xuXG4gICAgJChgJHtzZWxlY3Rpb259IC5zZWFyY2hfX2dvdG9gKS5jbGljaygoZSkgPT4ge1xuICAgICAgY29uc3QgY2hlY2tEYXRhID0gJChgJHtzZWxlY3Rpb259IC5jaGVjay1jYWxlbmRhcmApLmRhdGEoJ2RhdGVwaWNrZXInKS5zZWxlY3RlZERhdGVzO1xuICAgICAgY29uc3QgZXZpY3REYXRhID0gJChgJHtzZWxlY3Rpb259IC5ldmljdGlvbi1jYWxlbmRhcmApLmRhdGEoJ2RhdGVwaWNrZXInKS5zZWxlY3RlZERhdGVzO1xuICAgICAgY29uc3QgZ3Vlc3RzID0gY2FsY1N1bU9mR3Vlc3RzKCk7XG5cbiAgICAgIGNvbnN0IGZvcm1hdGVkQ2hlY2sgPSBtb21lbnQoY2hlY2tEYXRhWzBdKS5mb3JtYXQoJ0RELk1NLllZWVknKTtcbiAgICAgIGNvbnN0IGZvcm1hdGVkRXZpY3QgPSBtb21lbnQoZXZpY3REYXRhWzBdKS5mb3JtYXQoJ0RELk1NLllZWVknKTtcbiAgICAgIGNvbnN0IGNvbXBhcmVTdHJpbmcgPSBgaHR0cHM6Ly9vc3Ryb3Zvay5ydS9ob3RlbC91bml0ZWRfYXJhYl9lbWlyYXRlcy9hYnVfZGhhYmkvP3E9NDUzJmRhdGVzPSR7Zm9ybWF0ZWRDaGVja30tJHtmb3JtYXRlZEV2aWN0fSZndWVzdHM9JHtndWVzdHN9YFxuXG4gICAgICAvLyB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGNvbXBhcmVTdHJpbmc7XG4gICAgICB3aW5kb3cub3Blbihjb21wYXJlU3RyaW5nLCAnX2JsYW5rJyk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhmb3JtYXRlZENoZWNrKVxuICAgICAgLy8gY29uc29sZS5sb2coZm9ybWF0ZWRFdmljdClcbiAgICAgIC8vIGNvbnNvbGUubG9nKGd1ZXN0cylcbiAgICAgIC8vIGNvbnNvbGUubG9nKGNvbXBhcmVTdHJpbmcpXG4gICAgfSlcbiAgfVxuIiwiLypjb25zdCB0YWJsZXRXaWR0aCA9IHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1pbi13aWR0aDogNzY4cHgpXCIpO1xuY29uc3QgZGVza3RvcFdpZHRoID0gd2luZG93Lm1hdGNoTWVkaWEoXCIobWluLXdpZHRoOiAxMjAwcHgpXCIpO1xuY29uc3QgZGVza3RvcFdpZHRoTWF4ID0gd2luZG93Lm1hdGNoTWVkaWEoXCIobWluLXdpZHRoOiAxOTIwcHgpXCIpO1xuXG5sZXQgbGltaXRJbWFnZXMgPSA5O1xuXG5pZiAoZGVza3RvcFdpZHRoTWF4Lm1hdGNoZXMpIHtcbiAgICBsaW1pdEltYWdlcyA9IDE2O1xuICB9IGVsc2UgaWYgKGRlc2t0b3BXaWR0aC5tYXRjaGVzKSB7XG4gICAgbGltaXRJbWFnZXMgPSAxMjtcbiAgfSBlbHNlIGlmICh0YWJsZXRXaWR0aC5tYXRjaGVzKSB7XG4gICAgbGltaXRJbWFnZXMgPSAxMDtcbiAgfSBlbHNlIHtcbiAgICBsaW1pdEltYWdlcyA9IDk7XG4gIH0gKi9cblxuY29uc3QgZmVlZCA9IG5ldyBJbnN0YWZlZWQoe1xuICBnZXQ6ICd1c2VyJyxcbiAgdXNlcklkOiAxNDExMDQ4NjA3MCxcbiAgYWNjZXNzVG9rZW46ICcxNDExMDQ4NjA3MC4xNjc3ZWQwLmUyOWYzOTBkNTQyNTQ4Y2M5ZDM4Mzk1NGZmMmIyZjNhJyxcbiAgdGFyZ2V0OiAnSW5zdGFmZWVkJyxcbiAgcmVzb2x1dGlvbjogJ3RodW1ibmFpbCcsXG4gIGxpbWl0OiA1MCxcbiAgdGVtcGxhdGU6ICc8bGk+PGltZyBzcmM9XCJ7e2ltYWdlfX1cIiAvPjwvbGk+Jyxcbn0pO1xuXG5mZWVkLnJ1bigpO1xuIiwiICBjb25zdCBsaW1pdCA9ICQod2luZG93KS5oZWlnaHQoKSAvIDQ7XG4gIGNvbnN0IGJhY2tUb1RvcCA9ICQoJyN1cC1idG4nKTtcblxuICAvLyBBcHBlYXJpbmcgYW5kIGRpc2FwcGVhcmluZyBvZiB0aGUgJ3VwJyBidXR0b24gb24gdGhlIGZpcnN0IHNjcmVlblxuICAvLyBhbmQgZml4ZWQgbWVudSBvbiB0b3Agc2NyZWVuXG4gICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xuICAgIGlmICgkKHRoaXMpLnNjcm9sbFRvcCgpID4gbGltaXQpIHtcbiAgICAgIGJhY2tUb1RvcC5mYWRlSW4oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYmFja1RvVG9wLmZhZGVPdXQoKTtcbiAgICB9XG4gIH0pO1xuXG4gICAvLyBTb2Z0IHNjcm9sbCB0byB0aGUgdG9wXG4gIGJhY2tUb1RvcC5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgJCgnYm9keSwgaHRtbCcpLmFuaW1hdGUoe3Njcm9sbFRvcDogMH0sIDEwMCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9KTtcbiIsImNvbnN0IFRBQkxFVF9XSURUSCA9IDc2OCAtIDE7XG5jb25zdCBERVNLVE9QX1dJRFRIID0gMTE5MCAtIDE7XG5cbiQoJy5hZHZhbnRhZ2VzX19zbGlkZXInKS5zbGljayh7XG4gIHNsaWRlc1RvU2hvdzogMSxcbiAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gIGFycm93czogZmFsc2UsXG4gIGRvdHM6IHRydWUsXG4gIG1vYmlsZUZpcnN0OiB0cnVlLFxuICByZXNwb25zaXZlOiBbXG4gICAge1xuICAgICAgYnJlYWtwb2ludDogVEFCTEVUX1dJRFRILFxuICAgICAgc2V0dGluZ3M6ICd1bnNsaWNrJ1xuICAgIH1cbiAgXVxufSk7XG5cbiQoJy50cmFuc3BvcnRfX3NsaWRlcicpLnNsaWNrKHtcbiAgc2xpZGVzVG9TaG93OiAxLFxuICBzbGlkZXNUb1Njcm9sbDogMSxcbiAgYXJyb3dzOiBmYWxzZSxcbiAgZG90czogdHJ1ZSxcbiAgbW9iaWxlRmlyc3Q6IHRydWUsXG4gIHJlc3BvbnNpdmU6IFtcbiAgICB7XG4gICAgICBicmVha3BvaW50OiBUQUJMRVRfV0lEVEgsXG4gICAgICBzZXR0aW5nczogJ3Vuc2xpY2snXG4gICAgfVxuICBdXG59KTtcblxuJCgnLmxpZmVoYWNrX19zbGlkZXInKS5zbGljayh7XG4gIHNsaWRlc1RvU2hvdzogMSxcbiAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gIGFycm93czogZmFsc2UsXG4gIGRvdHM6IHRydWUsXG4gIG1vYmlsZUZpcnN0OiB0cnVlLFxuICByZXNwb25zaXZlOiBbXG4gICAge1xuICAgICAgYnJlYWtwb2ludDogVEFCTEVUX1dJRFRILFxuICAgICAgc2V0dGluZ3M6ICd1bnNsaWNrJ1xuICAgIH1cbiAgXVxufSk7XG5cbiQoJy5zdG9wX19zbGlkZXInKS5zbGljayh7XG4gIHNsaWRlc1RvU2hvdzogMSxcbiAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gIGFycm93czogZmFsc2UsXG4gIGRvdHM6IHRydWUsXG4gIG1vYmlsZUZpcnN0OiB0cnVlLFxuICByZXNwb25zaXZlOiBbXG4gICAge1xuICAgICAgYnJlYWtwb2ludDogVEFCTEVUX1dJRFRILFxuICAgICAgc2V0dGluZ3M6ICd1bnNsaWNrJ1xuICAgIH1cbiAgXVxufSk7XG5cbiQoJy5kZXRhaWxzX19zbGlkZXItZm9yJykuc2xpY2soe1xuICBzbGlkZXNUb1Nob3c6IDEsXG4gIHNsaWRlc1RvU2Nyb2xsOiAxLFxuICBpbml0aWFsU2xpZGU6IDIsXG4gIGNlbnRlck1vZGU6IGZhbHNlLFxuICBkb3RzOiB0cnVlLFxuICBhcnJvd3M6IGZhbHNlLFxuICBhc05hdkZvcjogJy5kZXRhaWxzX19zbGlkZXItbmF2JyxcbiAgbW9iaWxlRmlyc3Q6IHRydWUsXG4gIHJlc3BvbnNpdmU6IFtcbiAgICB7IGJyZWFrcG9pbnQ6IFRBQkxFVF9XSURUSCxcbiAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICAgICAgY2VudGVyTW9kZTogdHJ1ZSxcbiAgICAgICAgdmFyaWFibGVXaWR0aDogdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgXVxufSk7XG5cbiQoJy5kZXRhaWxzX19zbGlkZXItbmF2Jykuc2xpY2soe1xuICBzbGlkZXNUb1Nob3c6IDQsXG4gIHNsaWRlc1RvU2Nyb2xsOiAxLFxuICBpbml0aWFsU2xpZGU6IDIsXG4gIGRvdHM6IGZhbHNlLFxuICBhc05hdkZvcjogJy5kZXRhaWxzX19zbGlkZXItZm9yJyxcbiAgZm9jdXNPblNlbGVjdDogdHJ1ZSxcbiAgdmFyaWFibGVXaWR0aDogdHJ1ZSxcbiAgbW9iaWxlRmlyc3Q6IHRydWUsXG4gIHJlc3BvbnNpdmU6IFtcbiAgICB7IGJyZWFrcG9pbnQ6IFRBQkxFVF9XSURUSCxcbiAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgIHNsaWRlc1RvU2hvdzogNixcbiAgICAgICAgZG90czogdHJ1ZSxcbiAgICAgIH1cbiAgICB9XG4gIF1cbn0pO1xuXG4vLyDQn9Cw0YDQsNC80LXRgtGA0Ysg0YHQu9Cw0LnQtNC10YDQvtCyINC00L7RgdGC0L7Qv9GA0LjQvNC10YfQsNGC0LXQu9GM0L3QvtGB0YLQtdC5XG5jb25zdCBzZXRTbGlja1BhcmFtZXRlcnMgPSBmdW5jdGlvbihhcnJvd1ByZXYsIGFycm93TmV4dCkge1xuICBjb25zdCBzbGlja1BhcmFtZXRlcnMgPSB7XG4gICAgbW9iaWxlRmlyc3Q6IHRydWUsXG4gICAgaW5maW5pdGU6IHRydWUsXG4gICAgc2xpZGVzVG9TaG93OiAxLFxuICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxuICAgIHZhcmlhYmxlV2lkdGg6IHRydWUsXG4gICAgZG90czogZmFsc2UsXG4gICAgcHJldkFycm93OiAkKGFycm93UHJldiksXG4gICAgbmV4dEFycm93OiAkKGFycm93TmV4dCksXG4gICAgcmVzcG9uc2l2ZTogW1xuICAgICAgeyBicmVha3BvaW50OiBUQUJMRVRfV0lEVEgsXG4gICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgY2VudGVyTW9kZTogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHsgYnJlYWtwb2ludDogREVTS1RPUF9XSURUSCxcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBdXG4gIH1cbiAgcmV0dXJuIHNsaWNrUGFyYW1ldGVycztcbn07XG5cbmNvbnN0IGJldHRlcjEgPSBzZXRTbGlja1BhcmFtZXRlcnMoJy5iZXR0ZXJfX2Fycm93LS1wcmV2MScsICcuYmV0dGVyX19hcnJvdy0tbmV4dDEnKTtcbmNvbnN0IGJldHRlcjIgPSBzZXRTbGlja1BhcmFtZXRlcnMoJy5iZXR0ZXJfX2Fycm93LS1wcmV2MicsICcuYmV0dGVyX19hcnJvdy0tbmV4dDInKTtcbmNvbnN0IGJldHRlcjMgPSBzZXRTbGlja1BhcmFtZXRlcnMoJy5iZXR0ZXJfX2Fycm93LS1wcmV2MycsICcuYmV0dGVyX19hcnJvdy0tbmV4dDMnKTtcbmNvbnN0IGJldHRlcjQgPSBzZXRTbGlja1BhcmFtZXRlcnMoJy5iZXR0ZXJfX2Fycm93LS1wcmV2NCcsICcuYmV0dGVyX19hcnJvdy0tbmV4dDQnKTtcblxuJCgnLmJldHRlcl9fc2xpZGVyLS0xJykuc2xpY2soYmV0dGVyMSk7XG4kKCcuYmV0dGVyX19zbGlkZXItLTInKS5zbGljayhiZXR0ZXIyKTtcbiQoJy5iZXR0ZXJfX3NsaWRlci0tMycpLnNsaWNrKGJldHRlcjMpO1xuJCgnLmJldHRlcl9fc2xpZGVyLS00Jykuc2xpY2soYmV0dGVyNCk7XG4kKCcuYmV0dGVyX19tZW51LWl0ZW1bZGF0YS1udW09XCIxXCJdJykuZmluZCgnLmJldHRlcl9fc3VibWVudS1pdGVtW2RhdGEtc3VibnVtPVwiMFwiXScpLmFkZENsYXNzKCdiZXR0ZXJfX3N1Ym1lbnUtaXRlbS0tYWN0aXZlJyk7XG5cbmNvbnN0IHRvZ2dsZVN1Ym1lbnUgPSBmdW5jdGlvbihudW1DdXJyZW50U2xpZGUsIG51bU5leHRTbGlkZSwgbnVtU2xpZGVyKSB7XG4gICQoJy5iZXR0ZXJfX21lbnUtaXRlbVtkYXRhLW51bT1cIicgKyBudW1TbGlkZXIgKyAnXCJdJykuZmluZCgnLmJldHRlcl9fc3VibWVudS1pdGVtW2RhdGEtc3VibnVtPVwiJyArIG51bUN1cnJlbnRTbGlkZSArICdcIl0nKS5yZW1vdmVDbGFzcygnYmV0dGVyX19zdWJtZW51LWl0ZW0tLWFjdGl2ZScpO1xuICAkKCcuYmV0dGVyX19tZW51LWl0ZW1bZGF0YS1udW09XCInICsgbnVtU2xpZGVyICsgJ1wiXScpLmZpbmQoJy5iZXR0ZXJfX3N1Ym1lbnUtaXRlbVtkYXRhLXN1Ym51bT1cIicgKyBudW1OZXh0U2xpZGUgKyAnXCJdJykuYWRkQ2xhc3MoJ2JldHRlcl9fc3VibWVudS1pdGVtLS1hY3RpdmUnKTtcbn07XG5cbi8vINCh0YDQsNCx0LDRgtGL0LLQsNC10YIg0LTQviDRgdC80LXQvdGLINGB0LvQsNC50LTQsCDQsiDRgdC70LDQudC00LXRgNC1XG5mdW5jdGlvbiBiZWZvcmVDaGFuZ2VIYW5kbGVyKGV2ZW50LCBzbGljaywgY3VycmVudFNsaWRlLCBuZXh0U2xpZGUpIHtcbiAgY29uc3QgbnVtU2xpZGVyID0gc2xpY2suJHNsaWRlci5kYXRhKCkubnVtO1xuICB0b2dnbGVTdWJtZW51KGN1cnJlbnRTbGlkZSwgbmV4dFNsaWRlLCBudW1TbGlkZXIpO1xufVxuXG4kKCcuYmV0dGVyX19tZW51LWl0ZW0nKS5jbGljayhmdW5jdGlvbiAoZXZ0KSB7XG4gIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdiZXR0ZXJfX21lbnUtaXRlbS0tYWN0aXZlJykpIHtcbiAgICByZXR1cm47XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgbWVudUl0ZW0gPSAkKHRoaXMpLmRhdGEoKS5udW07XG4gICAgY29uc3QgdGFyZ2V0U2xpZGVyID0gJCgnLmJldHRlcl9fc2xpZGVyW2RhdGEtbnVtPVwiJyArIG1lbnVJdGVtICsgJ1wiXScpO1xuICAgIGNvbnN0IHRhcmdldENvbnRyb2wgPSAkKCcuYmV0dGVyX19jb250cm9sc1tkYXRhLW51bT1cIicgKyBtZW51SXRlbSArICdcIl0nKTtcblxuICAgICQoJy5iZXR0ZXInKS5maW5kKCcuYmV0dGVyX19zbGlkZXItLWFjdGl2ZScpLm9mZignYmVmb3JlQ2hhbmdlJywgYmVmb3JlQ2hhbmdlSGFuZGxlcik7IC8vINCj0LTQsNC70Y/QtdGCINGB0LvRg9GI0LDRgtC10LvRjCDRgdC80LXQvdGLINGB0LvQsNC50LTQsFxuICAgIHRhcmdldFNsaWRlci5vbignYmVmb3JlQ2hhbmdlJywgYmVmb3JlQ2hhbmdlSGFuZGxlcik7IC8vINCU0L7QsdCw0LLQu9GP0LXRgiDRgdC70YPRiNCw0YLQtdC70Ywg0YHQvNC10L3RiyDRgdC70LDQudC00LBcblxuICAgICQoJy5iZXR0ZXInKS5maW5kKCcuYmV0dGVyX19zbGlkZXItLWFjdGl2ZScpLnJlbW92ZUNsYXNzKCdiZXR0ZXJfX3NsaWRlci0tYWN0aXZlJyk7XG4gICAgJCgnLmJldHRlcicpLmZpbmQoJy5iZXR0ZXJfX21lbnUtaXRlbS0tYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2JldHRlcl9fbWVudS1pdGVtLS1hY3RpdmUnKTtcbiAgICAkKCcuYmV0dGVyJykuZmluZCgnLmJldHRlcl9fc3VibWVudS1pdGVtLS1hY3RpdmUnKS5yZW1vdmVDbGFzcygnYmV0dGVyX19zdWJtZW51LWl0ZW0tLWFjdGl2ZScpO1xuICAgICQoJy5iZXR0ZXInKS5maW5kKCcuYmV0dGVyX19jb250cm9scy0tYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2JldHRlcl9fY29udHJvbHMtLWFjdGl2ZScpO1xuXG4gICAgJCh0aGlzKS5hZGRDbGFzcygnYmV0dGVyX19tZW51LWl0ZW0tLWFjdGl2ZScpO1xuICAgIHRhcmdldFNsaWRlci5hZGRDbGFzcygnYmV0dGVyX19zbGlkZXItLWFjdGl2ZScpO1xuICAgIHRhcmdldENvbnRyb2wuYWRkQ2xhc3MoJ2JldHRlcl9fY29udHJvbHMtLWFjdGl2ZScpO1xuICAgICQoJy5iZXR0ZXInKS5maW5kKCcuYmV0dGVyX19zbGlkZXItLWFjdGl2ZScpLnNsaWNrKCdzbGlja0dvVG8nLCAwKTtcblxuICAgICQoJy5iZXR0ZXJfX21lbnUtaXRlbVtkYXRhLW51bT1cIicgKyBtZW51SXRlbSArICdcIl0nKS5maW5kKCcuYmV0dGVyX19zdWJtZW51LWl0ZW1bZGF0YS1zdWJudW09XCIwXCJdJykuYWRkQ2xhc3MoJ2JldHRlcl9fc3VibWVudS1pdGVtLS1hY3RpdmUnKTtcbiAgICB0YXJnZXRTbGlkZXIuc2xpY2soJ3JlZnJlc2gnKTtcbiAgfVxufSk7XG5cbiQoJy5iZXR0ZXJfX3N1Ym1lbnUtaXRlbScpLmNsaWNrKGZ1bmN0aW9uIChldnQpIHtcbiAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2JldHRlcl9fc3VibWVudS1pdGVtLS1hY3RpdmUnKSkge1xuICAgIHJldHVybjtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBzdWJtZW51SXRlbSA9ICQodGhpcykuZGF0YSgpLnN1Ym51bTtcblxuICAgICQoJy5iZXR0ZXInKS5maW5kKCcuYmV0dGVyX19zbGlkZXItLWFjdGl2ZScpLnNsaWNrKCdzbGlja0dvVG8nLCBzdWJtZW51SXRlbSk7XG5cbiAgICAkKCcuYmV0dGVyJykuZmluZCgnLmJldHRlcl9fc3VibWVudS1pdGVtLS1hY3RpdmUnKS5yZW1vdmVDbGFzcygnYmV0dGVyX19zdWJtZW51LWl0ZW0tLWFjdGl2ZScpO1xuICAgICQodGhpcykuYWRkQ2xhc3MoJ2JldHRlcl9fc3VibWVudS1pdGVtLS1hY3RpdmUnKTtcbiAgfVxufSk7XG4iXX0=
