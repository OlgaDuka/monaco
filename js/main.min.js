"use strict";var headerFormSelect=".header__search",footerFormSelect=".footer__search";function getNoun(t,e,a,c){var o=t;return t=Math.abs(t),5<=(t%=100)&&t<=20?o+" "+c:1===(t%=10)?o+" "+e:2<=t&&t<=4?o+" "+a:o+" "+c}function makeForm(i){var t=new Date,e=new Date,a=new Date;e.setDate(e.getDate()+1),a.setDate(a.getDate()+2),$("".concat(i," .check-calendar")).datepicker({minDate:t,toggleSelected:!1,dateFormat:"d, MM",position:"bottom center",onSelect:function(t,e,a){if(""===e)a.$el.val("Выберите дату");else{var c=moment(e).format("DD MMMM");a.$el.attr("value",c),a.$el.val(c)}var o=new Date(e);o.setDate(o.getDate()+1);var n=$("".concat(i," .eviction-calendar")).datepicker().data("datepicker");e>=n.date?(n.update("minDate",o),n.selectDate(o),$("".concat(i," .eviction-calendar")).val(moment(o).format("DD MMMM")),$("".concat(i," .eviction-calendar")).attr("value",moment(o).format("DD MMMM"))):(n.update("minDate",o),$("".concat(i," .eviction-calendar")).val(moment(n.date).format("DD MMMM")),$("".concat(i," .eviction-calendar")).attr("value",moment(n.date).format("DD MMMM")))}}),$("".concat(i," .eviction-calendar")).datepicker({minDate:a,toggleSelected:!1,dateFormat:"d, MM",position:"bottom center",onSelect:function(t,e,a){if(""===e)a.$el.val("Выберите дату");else{var c=moment(e).format("DD MMMM");a.$el.attr("value",c),a.$el.val(c)}}});var c=moment();c.locale("ru"),$("".concat(i," .check-calendar")).attr("value",moment(c).add(1,"days").format("DD MMMM")),$("".concat(i," .eviction-calendar")).attr("value",moment(c).add(2,"days").format("DD MMMM")),$("".concat(i," .check-calendar")).datepicker().data("datepicker").selectDate(e),$("".concat(i," .eviction-calendar")).datepicker().data("datepicker").selectDate(a);var o=!1;$("".concat(i," .guest")).click(function(t){o||($("".concat(i," .search__guest-change")).fadeToggle(200),o=!0)}),$(document).mouseup(function(t){var e=$("".concat(i," .search__guest-change"));0===e.has(t.target).length&&o&&(e.fadeOut(),setTimeout(function(){o=!1},200))});var n=$("".concat(i," .adult-sum")),r=$("".concat(i," .adult-plus")),s=$("".concat(i," .adult-minus"));r.click(function(t){var e=n.text();e<6&&(e++,n.text(e)),u()}),s.click(function(t){var e=n.text();1<e&&(e--,n.text(e)),u()});var l=$("".concat(i," .child-sum")),d=$("".concat(i," .child-plus")),m=$("".concat(i," .child-minus"));function u(){var t=parseInt(n.text())+parseInt(l.text()),e=getNoun(t,"гостя","гостей","гостей");return $("".concat(i," .full-sum")).text(e),1===parseInt(n.text())?s.attr("disabled",!0):s.attr("disabled",!1),6===parseInt(n.text())?r.attr("disabled",!0):r.attr("disabled",!1),0===parseInt(l.text())?m.attr("disabled",!0):m.attr("disabled",!1),5===parseInt(l.text())?d.attr("disabled",!0):d.attr("disabled",!1),t}d.click(function(t){var e=l.text();e<5&&(e++,l.text(e)),u()}),m.click(function(t){var e=l.text();0<e&&(e--,l.text(e)),u()}),$("".concat(i," .check")).click(function(t){$("".concat(i," .check-calendar")).data("datepicker").show()}),$("".concat(i," .eviction")).click(function(t){$("".concat(i," .eviction-calendar")).data("datepicker").show()}),$("".concat(i," .search__goto")).click(function(t){var e=$("".concat(i," .check-calendar")).data("datepicker").selectedDates,a=$("".concat(i," .eviction-calendar")).data("datepicker").selectedDates,c=u(),o=moment(e[0]).format("DD.MM.YYYY"),n=moment(a[0]).format("DD.MM.YYYY"),r="https://ostrovok.ru/hotel/united_arab_emirates/abu_dhabi/?q=453&dates=".concat(o,"-").concat(n,"&guests=").concat(c);window.open(r,"_blank")})}makeForm(headerFormSelect),makeForm(footerFormSelect);var TABLET_WIDTH=767,DESKTOP_WIDTH=1189;$(".advantages__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:"unslick"}]}),$(".transport__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:"unslick"}]}),$(".lifehack__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:"unslick"}]}),$(".stop__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:"unslick"}]});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm0uanMiLCJzbGlkZXIuanMiXSwibmFtZXMiOlsiaGVhZGVyRm9ybVNlbGVjdCIsImZvb3RlckZvcm1TZWxlY3QiLCJnZXROb3VuIiwibnVtYmVyIiwib25lIiwidHdvIiwiZml2ZSIsImluaXROdW1iZXIiLCJNYXRoIiwiYWJzIiwibWFrZUZvcm0iLCJzZWxlY3Rpb24iLCJjdXJEYXRlIiwiRGF0ZSIsImNoZWNrRGF5IiwiZXZpY3REYXkiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsIiQiLCJjb25jYXQiLCJkYXRlcGlja2VyIiwibWluRGF0ZSIsInRvZ2dsZVNlbGVjdGVkIiwiZGF0ZUZvcm1hdCIsInBvc2l0aW9uIiwib25TZWxlY3QiLCJmZCIsImQiLCJwaWNrZXJzIiwiJGVsIiwidmFsIiwiZGF0ZSIsIm1vbWVudCIsImZvcm1hdCIsImF0dHIiLCJ1cGRNaW4iLCJkYXRhIiwidXBkYXRlIiwic2VsZWN0RGF0ZSIsImRlZkRheSIsImxvY2FsZSIsImFkZCIsIm9wZW5lZCIsImNsaWNrIiwiZSIsImZhZGVUb2dnbGUiLCJkb2N1bWVudCIsIm1vdXNldXAiLCJjb250YWluZXIiLCJoYXMiLCJ0YXJnZXQiLCJsZW5ndGgiLCJmYWRlT3V0Iiwic2V0VGltZW91dCIsImFkdWx0U3VtIiwiYWR1bHRQbHVzIiwiYWR1bHRNaW51cyIsIm51bSIsInRleHQiLCJjYWxjU3VtT2ZHdWVzdHMiLCJjaGlsZFN1bSIsImNoaWxkUGx1cyIsImNoaWxkTWludXMiLCJmdWxsU3VtIiwicGFyc2VJbnQiLCJjb25jYXRTdHJpbmciLCJzaG93IiwiY2hlY2tEYXRhIiwic2VsZWN0ZWREYXRlcyIsImV2aWN0RGF0YSIsImd1ZXN0cyIsImZvcm1hdGVkQ2hlY2siLCJmb3JtYXRlZEV2aWN0IiwiY29tcGFyZVN0cmluZyIsIndpbmRvdyIsIm9wZW4iLCJUQUJMRVRfV0lEVEgiLCJERVNLVE9QX1dJRFRIIiwic2xpY2siLCJzbGlkZXNUb1Nob3ciLCJzbGlkZXNUb1Njcm9sbCIsImFy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Q0FDLGNBQUEsS0FFQTNELEVBQUEsdUJBQUE0RCxNQUFBLENBQ0FDLGFBQUEsRUFDQUMsZUFBQSxFQUNBQyxRQUFBLEVBQ0FDLE1BQUEsRUFDQUMsYUFBQSxFQUNBQyxXQUFBLENBQ0EsQ0FDQUMsV0FBQVQsYUFDQVUsU0FBQSxjQUtBcEUsRUFBQSxzQkFBQTRELE1BQUEsQ0FDQUMsYUFBQSxFQUNBQyxlQUFBLEVBQ0FDLFFBQUEsRUFDQUMsTUFBQSxFQUNBQyxhQUFBLEVBQ0FDLFdBQUEsQ0FDQSxDQUNBQyxXQUFBVCxhQUNBVSxTQUFBLGNBS0FwRSxFQUFBLHFCQUFBNEQsTUFBQSxDQUNBQyxhQUFBLEVBQ0FDLGVBQUEsRUFDQUMsUUFBQSxFQUNBQyxNQUFBLEVBQ0FDLGFBQUEsRUFDQUMsV0FBQSxDQUNBLENBQ0FDLFdBQUFULGFBQ0FVLFNBQUEsY0FLQXBFLEVBQUEsaUJBQUE0RCxNQUFBLENBQ0FDLGFBQUEsRUFDQUMsZUFBQSxFQUNBQyxRQUFBLEVBQ0FDLE1BQUEsRUFDQUMsYUFBQSxFQUNBQyxXQUFBLENBQ0EsQ0FDQUMsV0FBQVQsYUFDQVUsU0FBQSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiICAvLyDQpNC+0YDQvNC40YDRg9C10Lwg0YTQvtGA0LzRiyDQt9Cw0LrQsNC30YtcbiAgY29uc3QgaGVhZGVyRm9ybVNlbGVjdCA9ICcuaGVhZGVyX19zZWFyY2gnO1xuICBjb25zdCBmb290ZXJGb3JtU2VsZWN0ID0gJy5mb290ZXJfX3NlYXJjaCc7XG5cbiAgbWFrZUZvcm0oaGVhZGVyRm9ybVNlbGVjdCk7XG4gIG1ha2VGb3JtKGZvb3RlckZvcm1TZWxlY3QpO1xuXG4vLyDQodC60LvQvtC90LXQvdC40LVcbmZ1bmN0aW9uIGdldE5vdW4obnVtYmVyLCBvbmUsIHR3bywgZml2ZSkge1xuICBjb25zdCBpbml0TnVtYmVyID0gbnVtYmVyXG4gIG51bWJlciA9IE1hdGguYWJzKG51bWJlcilcbiAgbnVtYmVyICU9IDEwMFxuICBpZiAobnVtYmVyID49IDUgJiYgbnVtYmVyIDw9IDIwKSB7XG4gICAgcmV0dXJuIGluaXROdW1iZXIgKyAnICcgKyBmaXZlXG4gIH1cbiAgbnVtYmVyICU9IDEwXG4gIGlmIChudW1iZXIgPT09IDEpIHtcbiAgICByZXR1cm4gaW5pdE51bWJlciArICcgJyArIG9uZVxuICB9XG4gIGlmIChudW1iZXIgPj0gMiAmJiBudW1iZXIgPD0gNCkge1xuICAgIHJldHVybiBpbml0TnVtYmVyICsgJyAnICsgdHdvXG4gIH1cbiAgcmV0dXJuIGluaXROdW1iZXIgKyAnICcgKyBmaXZlXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cbiAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDQpNC+0YDQvNCwINC/0L7QuNGB0LrQsCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cblxuICBmdW5jdGlvbiBtYWtlRm9ybShzZWxlY3Rpb24pIHtcbiAgICBjb25zdCBjdXJEYXRlID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBjaGVja0RheSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZXZpY3REYXkgPSBuZXcgRGF0ZSgpO1xuICAgIGNoZWNrRGF5LnNldERhdGUoY2hlY2tEYXkuZ2V0RGF0ZSgpICsgMSk7XG4gICAgZXZpY3REYXkuc2V0RGF0ZShldmljdERheS5nZXREYXRlKCkgKyAyKTtcblxuICAgIC8vICoqKioqKioqKioqKioqKiAqKtCh0LjQvdGF0YDQvtC90LjQt9Cw0YbQuNGPINC60LDQu9C10L3QtNCw0YDQtdC5ICoqKioqKioqKioqKioqKioqKioqKioqKiAvL1xuICAgICQoYCR7c2VsZWN0aW9ufSAuY2hlY2stY2FsZW5kYXJgKS5kYXRlcGlja2VyKHtcbiAgICAgIG1pbkRhdGU6IGN1ckRhdGUsXG4gICAgICB0b2dnbGVTZWxlY3RlZDogZmFsc2UsXG4gICAgICBkYXRlRm9ybWF0OiAnZCwgTU0nLFxuICAgICAgcG9zaXRpb246IFwiYm90dG9tIGNlbnRlclwiLFxuICAgICAgb25TZWxlY3Q6IGZ1bmN0aW9uIChmZCwgZCwgcGlja2Vycykge1xuICAgICAgICBpZiAoZCA9PT0gJycpIHtcbiAgICAgICAgICBwaWNrZXJzLiRlbC52YWwoJ9CS0YvQsdC10YDQuNGC0LUg0LTQsNGC0YMnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBkYXRlID0gbW9tZW50KGQpLmZvcm1hdCgnREQgTU1NTScpO1xuICAgICAgICAgIHBpY2tlcnMuJGVsLmF0dHIoJ3ZhbHVlJywgZGF0ZSk7XG4gICAgICAgICAgcGlja2Vycy4kZWwudmFsKGRhdGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdXBkTWluID0gbmV3IERhdGUoZCk7XG4gICAgICAgIHVwZE1pbi5zZXREYXRlKHVwZE1pbi5nZXREYXRlKCkgKyAxKTtcblxuICAgICAgICAvLyDQnNC10L3Rj9C10Lwg0LzQuNC9INC30L3QsNGH0LXQvdC40LUg0LIg0LrQsNC70LXQvdC00LDRgNC1INCy0YvRgdC10LvQtdC90LjRj1xuICAgICAgICBjb25zdCBkYXRlcGlja2VyID0gJChgJHtzZWxlY3Rpb259IC5ldmljdGlvbi1jYWxlbmRhcmApLmRhdGVwaWNrZXIoKS5kYXRhKCdkYXRlcGlja2VyJyk7XG5cbiAgICAgICAgaWYgKGQgPj0gZGF0ZXBpY2tlci5kYXRlKSB7XG4gICAgICAgICAgZGF0ZXBpY2tlci51cGRhdGUoJ21pbkRhdGUnLCB1cGRNaW4pO1xuICAgICAgICAgIGRhdGVwaWNrZXIuc2VsZWN0RGF0ZSh1cGRNaW4pO1xuICAgICAgICAgICQoYCR7c2VsZWN0aW9ufSAuZXZpY3Rpb24tY2FsZW5kYXJgKS52YWwobW9tZW50KHVwZE1pbikuZm9ybWF0KCdERCBNTU1NJykpXG4gICAgICAgICAgJChgJHtzZWxlY3Rpb259IC5ldmljdGlvbi1jYWxlbmRhcmApLmF0dHIoJ3ZhbHVlJywgbW9tZW50KHVwZE1pbikuZm9ybWF0KCdERCBNTU1NJykpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGF0ZXBpY2tlci51cGRhdGUoJ21pbkRhdGUnLCB1cGRNaW4pO1xuICAgICAgICAgICQoYCR7c2VsZWN0aW9ufSAuZXZpY3Rpb24tY2FsZW5kYXJgKS52YWwobW9tZW50KGRhdGVwaWNrZXIuZGF0ZSkuZm9ybWF0KCdERCBNTU1NJykpXG4gICAgICAgICAgJChgJHtzZWxlY3Rpb259IC5ldmljdGlvbi1jYWxlbmRhcmApLmF0dHIoJ3ZhbHVlJywgbW9tZW50KGRhdGVwaWNrZXIuZGF0ZSkuZm9ybWF0KCdERCBNTU1NJykpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgICQoYCR7c2VsZWN0aW9ufSAuZXZpY3Rpb24tY2FsZW5kYXJgKS5kYXRlcGlja2VyKHtcbiAgICAgIG1pbkRhdGU6IGV2aWN0RGF5LFxuICAgICAgdG9nZ2xlU2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgZGF0ZUZvcm1hdDogJ2QsIE1NJyxcbiAgICAgIHBvc2l0aW9uOiBcImJvdHRvbSBjZW50ZXJcIixcbiAgICAgIG9uU2VsZWN0OiBmdW5jdGlvbiAoZmQsIGQsIHBpY2tlcnMpIHtcbiAgICAgICAgaWYgKGQgPT09ICcnKSB7XG4gICAgICAgICAgcGlja2Vycy4kZWwudmFsKCfQktGL0LHQtdGA0LjRgtC1INC00LDRgtGDJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgZGF0ZSA9IG1vbWVudChkKS5mb3JtYXQoJ0REIE1NTU0nKTtcbiAgICAgICAgICBwaWNrZXJzLiRlbC5hdHRyKCd2YWx1ZScsIGRhdGUpO1xuICAgICAgICAgIHBpY2tlcnMuJGVsLnZhbChkYXRlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogLy9cblxuICAgIC8vINCX0L3QsNGH0LXQvdC40Y8g0L/Qvi3Rg9C80L7Qu9GH0LDQvdC40Y5cbiAgICBjb25zdCBkZWZEYXkgPSBtb21lbnQoKTtcblxuICAgIGRlZkRheS5sb2NhbGUoJ3J1JylcbiAgICAkKGAke3NlbGVjdGlvbn0gLmNoZWNrLWNhbGVuZGFyYCkuYXR0cigndmFsdWUnLCBtb21lbnQoZGVmRGF5KS5hZGQoMSwgJ2RheXMnKS5mb3JtYXQoJ0REIE1NTU0nKSk7XG4gICAgJChgJHtzZWxlY3Rpb259IC5ldmljdGlvbi1jYWxlbmRhcmApLmF0dHIoJ3ZhbHVlJywgbW9tZW50KGRlZkRheSkuYWRkKDIsICdkYXlzJykuZm9ybWF0KCdERCBNTU1NJykpO1xuXG5cbiAgICBjb25zdCBjaGVja0NhbGVuZGFyID0gJChgJHtzZWxlY3Rpb259IC5jaGVjay1jYWxlbmRhcmApLmRhdGVwaWNrZXIoKS5kYXRhKCdkYXRlcGlja2VyJyk7XG4gICAgY2hlY2tDYWxlbmRhci5zZWxlY3REYXRlKGNoZWNrRGF5KTtcblxuICAgIGNvbnN0IGV2aWN0aW9uQ2FsZW5kYXIgPSAkKGAke3NlbGVjdGlvbn0gLmV2aWN0aW9uLWNhbGVuZGFyYCkuZGF0ZXBpY2tlcigpLmRhdGEoJ2RhdGVwaWNrZXInKTtcbiAgICBldmljdGlvbkNhbGVuZGFyLnNlbGVjdERhdGUoZXZpY3REYXkpO1xuXG4gICAgLy8gKioqKioqKioqKioqINCa0L7Qu9C40YfQtdGB0YLQstC+INCz0L7RgdGC0LXQuSAqKioqKioqKioqKioqKioqIC8vXG4gICAgLy8g0JLRi9C/0LDQtNCw0Y7RidC10LUg0LzQtdC90Y5cbiAgICBsZXQgb3BlbmVkID0gZmFsc2U7XG5cbiAgICAkKGAke3NlbGVjdGlvbn0gLmd1ZXN0YCkuY2xpY2soKGUpID0+IHtcbiAgICAgIGlmICghb3BlbmVkKSB7XG4gICAgICAgICQoYCR7c2VsZWN0aW9ufSAuc2VhcmNoX19ndWVzdC1jaGFuZ2VgKS5mYWRlVG9nZ2xlKDIwMCk7XG4gICAgICAgIG9wZW5lZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vINCh0LrRgNGL0YLQuNC1INC/0YDQuCDQutC70LjQutC1INCy0L3QtSDQvtC60L3QsFxuICAgICQoZG9jdW1lbnQpLm1vdXNldXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBjb250YWluZXIgPSAkKGAke3NlbGVjdGlvbn0gLnNlYXJjaF9fZ3Vlc3QtY2hhbmdlYCk7XG4gICAgICBpZiAoY29udGFpbmVyLmhhcyhlLnRhcmdldCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGlmIChvcGVuZWQpIHtcbiAgICAgICAgICBjb250YWluZXIuZmFkZU91dCgpO1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgb3BlbmVkID0gZmFsc2U7XG4gICAgICAgICAgfSwgMjAwKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyDQktC30YDQvtGB0LvRi9C1XG4gICAgY29uc3QgYWR1bHRTdW0gPSAkKGAke3NlbGVjdGlvbn0gLmFkdWx0LXN1bWApO1xuICAgIGNvbnN0IGFkdWx0UGx1cyA9ICQoYCR7c2VsZWN0aW9ufSAuYWR1bHQtcGx1c2ApO1xuICAgIGNvbnN0IGFkdWx0TWludXMgPSAkKGAke3NlbGVjdGlvbn0gLmFkdWx0LW1pbnVzYCk7XG5cbiAgICBhZHVsdFBsdXMuY2xpY2soKGUpID0+IHtcbiAgICAgIGxldCBudW0gPSBhZHVsdFN1bS50ZXh0KClcbiAgICAgIGlmIChudW0gPCA2KSB7XG4gICAgICAgIG51bSsrO1xuICAgICAgICBhZHVsdFN1bS50ZXh0KG51bSlcbiAgICAgIH1cblxuICAgICAgY2FsY1N1bU9mR3Vlc3RzKCk7XG4gICAgfSk7XG5cbiAgICBhZHVsdE1pbnVzLmNsaWNrKChlKSA9PiB7XG4gICAgICBsZXQgbnVtID0gYWR1bHRTdW0udGV4dCgpXG4gICAgICBpZiAobnVtID4gMSkge1xuICAgICAgICBudW0tLTtcbiAgICAgICAgYWR1bHRTdW0udGV4dChudW0pXG4gICAgICB9XG5cbiAgICAgIGNhbGNTdW1PZkd1ZXN0cygpO1xuICAgIH0pO1xuXG4gICAgLy8g0JTQtdGC0LhcbiAgICBjb25zdCBjaGlsZFN1bSA9ICQoYCR7c2VsZWN0aW9ufSAuY2hpbGQtc3VtYCk7XG4gICAgY29uc3QgY2hpbGRQbHVzID0gJChgJHtzZWxlY3Rpb259IC5jaGlsZC1wbHVzYCk7XG4gICAgY29uc3QgY2hpbGRNaW51cyA9ICQoYCR7c2VsZWN0aW9ufSAuY2hpbGQtbWludXNgKTtcblxuICAgIGNoaWxkUGx1cy5jbGljaygoZSkgPT4ge1xuICAgICAgbGV0IG51bSA9IGNoaWxkU3VtLnRleHQoKVxuICAgICAgaWYgKG51bSA8IDUpIHtcbiAgICAgICAgbnVtKys7XG4gICAgICAgIGNoaWxkU3VtLnRleHQobnVtKVxuICAgICAgfVxuXG4gICAgICBjYWxjU3VtT2ZHdWVzdHMoKTtcbiAgICB9KTtcblxuICAgIGNoaWxkTWludXMuY2xpY2soKGUpID0+IHtcbiAgICAgIGxldCBudW0gPSBjaGlsZFN1bS50ZXh0KClcbiAgICAgIGlmIChudW0gPiAwKSB7XG4gICAgICAgIG51bS0tO1xuICAgICAgICBjaGlsZFN1bS50ZXh0KG51bSlcbiAgICAgIH1cblxuICAgICAgY2FsY1N1bU9mR3Vlc3RzKCk7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBjYWxjU3VtT2ZHdWVzdHMoKSB7XG4gICAgICBjb25zdCBmdWxsU3VtID0gcGFyc2VJbnQoYWR1bHRTdW0udGV4dCgpKSArIHBhcnNlSW50KGNoaWxkU3VtLnRleHQoKSk7XG4gICAgICBjb25zdCBjb25jYXRTdHJpbmcgPSBnZXROb3VuKGZ1bGxTdW0sICfQs9C+0YHRgtGPJywgJ9Cz0L7RgdGC0LXQuScsICfQs9C+0YHRgtC10LknKTtcbiAgICAgICQoYCR7c2VsZWN0aW9ufSAuZnVsbC1zdW1gKS50ZXh0KGNvbmNhdFN0cmluZyk7XG5cbiAgICAgIGlmIChwYXJzZUludChhZHVsdFN1bS50ZXh0KCkpID09PSAxKSB7XG4gICAgICAgIGFkdWx0TWludXMuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFkdWx0TWludXMuYXR0cignZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJzZUludChhZHVsdFN1bS50ZXh0KCkpID09PSA2KSB7XG4gICAgICAgIGFkdWx0UGx1cy5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWR1bHRQbHVzLmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyc2VJbnQoY2hpbGRTdW0udGV4dCgpKSA9PT0gMCkge1xuICAgICAgICBjaGlsZE1pbnVzLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGlsZE1pbnVzLmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyc2VJbnQoY2hpbGRTdW0udGV4dCgpKSA9PT0gNSkge1xuICAgICAgICBjaGlsZFBsdXMuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoaWxkUGx1cy5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZ1bGxTdW1cbiAgICB9XG5cblxuICAgICQoYCR7c2VsZWN0aW9ufSAuY2hlY2tgKS5jbGljaygoZSkgPT4ge1xuICAgICAgJChgJHtzZWxlY3Rpb259IC5jaGVjay1jYWxlbmRhcmApLmRhdGEoJ2RhdGVwaWNrZXInKS5zaG93KCk7XG4gICAgfSlcblxuICAgICQoYCR7c2VsZWN0aW9ufSAuZXZpY3Rpb25gKS5jbGljaygoZSkgPT4ge1xuICAgICAgJChgJHtzZWxlY3Rpb259IC5ldmljdGlvbi1jYWxlbmRhcmApLmRhdGEoJ2RhdGVwaWNrZXInKS5zaG93KCk7XG4gICAgfSlcblxuICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogLy9cblxuICAgICQoYCR7c2VsZWN0aW9ufSAuc2VhcmNoX19nb3RvYCkuY2xpY2soKGUpID0+IHtcbiAgICAgIGNvbnN0IGNoZWNrRGF0YSA9ICQoYCR7c2VsZWN0aW9ufSAuY2hlY2stY2FsZW5kYXJgKS5kYXRhKCdkYXRlcGlja2VyJykuc2VsZWN0ZWREYXRlcztcbiAgICAgIGNvbnN0IGV2aWN0RGF0YSA9ICQoYCR7c2VsZWN0aW9ufSAuZXZpY3Rpb24tY2FsZW5kYXJgKS5kYXRhKCdkYXRlcGlja2VyJykuc2VsZWN0ZWREYXRlcztcbiAgICAgIGNvbnN0IGd1ZXN0cyA9IGNhbGNTdW1PZkd1ZXN0cygpO1xuXG4gICAgICBjb25zdCBmb3JtYXRlZENoZWNrID0gbW9tZW50KGNoZWNrRGF0YVswXSkuZm9ybWF0KCdERC5NTS5ZWVlZJyk7XG4gICAgICBjb25zdCBmb3JtYXRlZEV2aWN0ID0gbW9tZW50KGV2aWN0RGF0YVswXSkuZm9ybWF0KCdERC5NTS5ZWVlZJyk7XG4gICAgICBjb25zdCBjb21wYXJlU3RyaW5nID0gYGh0dHBzOi8vb3N0cm92b2sucnUvaG90ZWwvdW5pdGVkX2FyYWJfZW1pcmF0ZXMvYWJ1X2RoYWJpLz9xPTQ1MyZkYXRlcz0ke2Zvcm1hdGVkQ2hlY2t9LSR7Zm9ybWF0ZWRFdmljdH0mZ3Vlc3RzPSR7Z3Vlc3RzfWBcblxuICAgICAgLy8gd2luZG93LmxvY2F0aW9uLmhyZWYgPSBjb21wYXJlU3RyaW5nO1xuICAgICAgd2luZG93Lm9wZW4oY29tcGFyZVN0cmluZywgJ19ibGFuaycpO1xuICAgICAgLy8gY29uc29sZS5sb2coZm9ybWF0ZWRDaGVjaylcbiAgICAgIC8vIGNvbnNvbGUubG9nKGZvcm1hdGVkRXZpY3QpXG4gICAgICAvLyBjb25zb2xlLmxvZyhndWVzdHMpXG4gICAgICAvLyBjb25zb2xlLmxvZyhjb21wYXJlU3RyaW5nKVxuICAgIH0pXG4gIH1cbiIsImNvbnN0IFRBQkxFVF9XSURUSCA9IDc2OCAtIDE7XG5jb25zdCBERVNLVE9QX1dJRFRIID0gMTE5MCAtIDE7XG5cbiQoJy5hZHZhbnRhZ2VzX19zbGlkZXInKS5zbGljayh7XG4gIHNsaWRlc1RvU2hvdzogMSxcbiAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gIGFycm93czogZmFsc2UsXG4gIGRvdHM6IHRydWUsXG4gIG1vYmlsZUZpcnN0OiB0cnVlLFxuICByZXNwb25zaXZlOiBbXG4gICAge1xuICAgICAgYnJlYWtwb2ludDogVEFCTEVUX1dJRFRILFxuICAgICAgc2V0dGluZ3M6ICd1bnNsaWNrJ1xuICAgIH1cbiAgXVxufSk7XG5cbiQoJy50cmFuc3BvcnRfX3NsaWRlcicpLnNsaWNrKHtcbiAgc2xpZGVzVG9TaG93OiAxLFxuICBzbGlkZXNUb1Njcm9sbDogMSxcbiAgYXJyb3dzOiBmYWxzZSxcbiAgZG90czogdHJ1ZSxcbiAgbW9iaWxlRmlyc3Q6IHRydWUsXG4gIHJlc3BvbnNpdmU6IFtcbiAgICB7XG4gICAgICBicmVha3BvaW50OiBUQUJMRVRfV0lEVEgsXG4gICAgICBzZXR0aW5nczogJ3Vuc2xpY2snXG4gICAgfVxuICBdXG59KTtcblxuJCgnLmxpZmVoYWNrX19zbGlkZXInKS5zbGljayh7XG4gIHNsaWRlc1RvU2hvdzogMSxcbiAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gIGFycm93czogZmFsc2UsXG4gIGRvdHM6IHRydWUsXG4gIG1vYmlsZUZpcnN0OiB0cnVlLFxuICByZXNwb25zaXZlOiBbXG4gICAge1xuICAgICAgYnJlYWtwb2ludDogVEFCTEVUX1dJRFRILFxuICAgICAgc2V0dGluZ3M6ICd1bnNsaWNrJ1xuICAgIH1cbiAgXVxufSk7XG5cbiQoJy5zdG9wX19zbGlkZXInKS5zbGljayh7XG4gIHNsaWRlc1RvU2hvdzogMSxcbiAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gIGFycm93czogZmFsc2UsXG4gIGRvdHM6IHRydWUsXG4gIG1vYmlsZUZpcnN0OiB0cnVlLFxuICByZXNwb25zaXZlOiBbXG4gICAge1xuICAgICAgYnJlYWtwb2ludDogVEFCTEVUX1dJRFRILFxuICAgICAgc2V0dGluZ3M6ICd1bnNsaWNrJ1xuICAgIH1cbiAgXVxufSk7XG4iXX0=
