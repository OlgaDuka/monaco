"use strict";var headerFormSelect=".header__search",footerFormSelect=".footer__search";function getNoun(e,t,a,r){var o=e;return e=Math.abs(e),5<=(e%=100)&&e<=20?o+" "+r:1===(e%=10)?o+" "+t:2<=e&&e<=4?o+" "+a:o+" "+r}function makeForm(s){var e=new Date,t=new Date,a=new Date;t.setDate(t.getDate()+1),a.setDate(a.getDate()+2),$("".concat(s," .check-calendar")).datepicker({minDate:e,toggleSelected:!1,dateFormat:"d, MM",position:"bottom center",onSelect:function(e,t,a){if(""===t)a.$el.val("Выберите дату");else{var r=moment(t).format("DD MMMM");a.$el.attr("value",r),a.$el.val(r)}var o=new Date(t);o.setDate(o.getDate()+1);var c=$("".concat(s," .eviction-calendar")).datepicker().data("datepicker");t>=c.date?(c.update("minDate",o),c.selectDate(o),$("".concat(s," .eviction-calendar")).val(moment(o).format("DD MMMM")),$("".concat(s," .eviction-calendar")).attr("value",moment(o).format("DD MMMM"))):(c.update("minDate",o),$("".concat(s," .eviction-calendar")).val(moment(c.date).format("DD MMMM")),$("".concat(s," .eviction-calendar")).attr("value",moment(c.date).format("DD MMMM")))}}),$("".concat(s," .eviction-calendar")).datepicker({minDate:a,toggleSelected:!1,dateFormat:"d, MM",position:"bottom center",onSelect:function(e,t,a){if(""===t)a.$el.val("Выберите дату");else{var r=moment(t).format("DD MMMM");a.$el.attr("value",r),a.$el.val(r)}}});var r=moment();r.locale("ru"),$("".concat(s," .check-calendar")).attr("value",moment(r).add(1,"days").format("DD MMMM")),$("".concat(s," .eviction-calendar")).attr("value",moment(r).add(2,"days").format("DD MMMM")),$("".concat(s," .check-calendar")).datepicker().data("datepicker").selectDate(t),$("".concat(s," .eviction-calendar")).datepicker().data("datepicker").selectDate(a);var o=!1;$("".concat(s," .guest")).click(function(e){o||($("".concat(s," .search__guest-change")).fadeToggle(200),o=!0)}),$(document).mouseup(function(e){var t=$("".concat(s," .search__guest-change"));0===t.has(e.target).length&&o&&(t.fadeOut(),setTimeout(function(){o=!1},200))});var c=$("".concat(s," .adult-sum")),i=$("".concat(s," .adult-plus")),n=$("".concat(s," .adult-minus"));i.click(function(e){var t=c.text();t<6&&(t++,c.text(t)),_()}),n.click(function(e){var t=c.text();1<t&&(t--,c.text(t)),_()});var l=$("".concat(s," .child-sum")),d=$("".concat(s," .child-plus")),m=$("".concat(s," .child-minus"));function _(){var e=parseInt(c.text())+parseInt(l.text()),t=getNoun(e,"гостя","гостей","гостей");return $("".concat(s," .full-sum")).text(t),1===parseInt(c.text())?n.attr("disabled",!0):n.attr("disabled",!1),6===parseInt(c.text())?i.attr("disabled",!0):i.attr("disabled",!1),0===parseInt(l.text())?m.attr("disabled",!0):m.attr("disabled",!1),5===parseInt(l.text())?d.attr("disabled",!0):d.attr("disabled",!1),e}d.click(function(e){var t=l.text();t<5&&(t++,l.text(t)),_()}),m.click(function(e){var t=l.text();0<t&&(t--,l.text(t)),_()}),$("".concat(s," .check")).click(function(e){$("".concat(s," .check-calendar")).data("datepicker").show()}),$("".concat(s," .eviction")).click(function(e){$("".concat(s," .eviction-calendar")).data("datepicker").show()}),$("".concat(s," .search__goto")).click(function(e){var t=$("".concat(s," .check-calendar")).data("datepicker").selectedDates,a=$("".concat(s," .eviction-calendar")).data("datepicker").selectedDates,r=_(),o=moment(t[0]).format("DD.MM.YYYY"),c=moment(a[0]).format("DD.MM.YYYY"),i="https://ostrovok.ru/hotel/united_arab_emirates/abu_dhabi/?q=453&dates=".concat(o,"-").concat(c,"&guests=").concat(r);window.open(i,"_blank")})}makeForm(headerFormSelect),makeForm(footerFormSelect);var limit=$(window).height()/4,backToTop=$("#up-btn");$(window).scroll(function(){$(this).scrollTop()>limit?backToTop.fadeIn():backToTop.fadeOut()}),backToTop.click(function(){return $("body, html").animate({scrollTop:0},100),!1});var TABLET_WIDTH=767,DESKTOP_WIDTH=1189;$(".advantages__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:"unslick"}]}),$(".transport__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:"unslick"}]}),$(".lifehack__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:"unslick"}]}),$(".stop__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:"unslick"}]}),$(".details__slider-for").slick({slidesToShow:1,slidesToScroll:1,initialSlide:2,centerMode:!1,dots:!0,arrows:!1,asNavFor:".details__slider-nav",mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:{slidesToShow:1,centerMode:!0,variableWidth:!0}}]}),$(".details__slider-nav").slick({slidesToShow:4,slidesToScroll:1,initialSlide:2,dots:!1,asNavFor:".details__slider-for",focusOnSelect:!0,variableWidth:!0,mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:{slidesToShow:6,dots:!0}}]});var setSlickParameters=function(e,t){return{mobileFirst:!0,infinite:!0,slidesToShow:1,slidesToScroll:1,dots:!1,prevArrow:$(e),nextArrow:$(t),responsive:[{breakpoint:TABLET_WIDTH,settings:{centerMode:!1}},{breakpoint:DESKTOP_WIDTH,settings:{slidesToShow:1}}]}},better1=setSlickParameters(".better__arrow--prev1",".better__arrow--next1"),better2=setSlickParameters(".better__arrow--prev2",".better__arrow--next2"),better3=setSlickParameters(".better__arrow--prev3",".better__arrow--next3"),better4=setSlickParameters(".better__arrow--prev4",".better__arrow--next4");$(".better__slider--1").slick(better1),$(".better__slider--2").slick(better2),$(".better__slider--3").slick(better3),$(".better__slider--4").slick(better4);var menu=document.querySelector(".better__menu"),betterMenuItems=menu.querySelectorAll(".better__menu-item"),betterSliders=document.querySelectorAll(".better__slider");$(".better__menu-item").click(function(e){if(!$(this).hasClass("better__menu-item--active")){var t=$(this).data().num,a=$('.better__slider[data-num="'+t+'"]'),r=$('.better__controls[data-num="'+t+'"]');$(".better__slider").each(function(e,t){$(t).removeClass("better__slider--active")}),$(".better__controls").each(function(e,t){$(t).removeClass("better__controls--active")}),$(".better__menu-item").each(function(e,t){$(t).removeClass("better__menu-item--active")}),$(this).addClass("better__menu-item--active"),a.addClass("better__slider--active"),r.addClass("better__controls--active"),a.slick("refresh")}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm0uanMiLCJzY3JvbGwuanMiLCJzbGlkZXIuanMiXSwibmFtZXMiOlsiaGVhZGVyRm9ybVNlbGVjdCIsImZvb3RlckZvcm1TZWxlY3QiLCJnZXROb3VuIiwibnVtYmVyIiwib25lIiwidHdvIiwiZml2ZSIsImluaXROdW1iZXIiLCJNYXRoIiwiYWJzIiwibWFrZUZvcm0iLCJzZWxlY3Rpb24iLCJjdXJEYXRlIiwiRGF0ZSIsImNoZWNrRGF5IiwiZXZpY3REYXkiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsIiQiLCJjb25jYXQiLCJkYXRlcGlja2VyIiwibWluRGF0ZSIsInRvZ2dsZVNlbGVjdGVkIiwiZGF0ZUZvcm1hdCIsInBvc2l0aW9uIiwib25TZWxlY3QiLCJmZCIsImQiLCJwaWNrZXJzIiwiJGVsIiwidmFsIiwiZGF0ZSIsIm1vbWVudCIsImZvcm1hdCIsImF0dHIiLCJ1cGRNaW4iLCJkYXRhIiwidXBkYXRlIiwic2VsZWN0RGF0ZSIsImRlZkRheSIsImxvY2FsZSIsImFkZCIsIm9wZW5lZCIsImNsaWNrIiwiZSIsImZhZGVUb2dnbGUiLCJkb2N1bWVudCIsIm1vdXNldXAiLCJjb250YWluZXIiLCJoYXMiLCJ0YXJnZXQiLCJsZW5ndGgiLCJmYWRlT3V0Iiwic2V0VGltZW91dCIsImFkdWx0U3VtIiwiYWR1bHRQbHVzIiwiYWR1bHRNaW51cyIsIm51bSIsInRleHQiLCJjYWxjU3VtT2ZHdWVzdHMiLCJjaGlsZFN1bSIsImNoaWxkUGx1cyIsImNoaWxkTWludXMiLCJmdWxsU3VtIiwicGFyc2VJbnQiLCJjb25jYXRTdHJpbmciLCJzaG93IiwiY2hlY2tEYXRhIiwic2VsZWN0ZWREYXRlcyIsImV2aWN0RGF0YSIsImd1ZXN0cyIsImZvcm1hdGVkQ2hlY2siLCJmb3JtYXRlZEV2aWN0IiwiY29tcGFyZVN0cmluZyIsIndpbmRvdyIsIm9wZW4iLCJsaW1pdCIsImhlaWdodCIsImJhY2tUb1RvcCIsInNjcm9sbCIsInRoaXMiLCJzY3JvbGxUb3AiLCJmYWRlSW4iLCJhbmltYXRlIiwiVEFCTEVUX1dJRFRIIiwiREVTS1RPUF9XSURUSCIsInNsaWNrIiwic2xpZGVzVG9TaG93Iiwic2xpZGVzVG9TY3JvbGwiLCJhcnJvd3MiLCJkb3RzIiwibW9iaWxlRmlyc3QiLCJyZXNwb25zaXZlIiwiYnJlYWtwb2ludCIsInNldHRpbmdzIiwiaW5pdGlhbFNsaWRlIiwiY2VudGVyTW9kZSIsImFzTmF2Rm9yIiwidmFyaWFibGVXaWR0aCIsImZvY3VzT25TZWxlY3QiLCJzZXRTbGlja1BhcmFtZXRlcnMiLCJhcnJvd1ByZXYiLCJhcnJvd05leHQiLCJpbmZpbml0ZSIsInByZXZBcnJvdyIsIm5leHRBcnJvdyIsImJldHRlcjEiLCJiZXR0ZXIyIiwiYmV0dGVyMyIsImJldHRlcjQiLCJtZW51IiwicXVlcnlTZWxlY3RvciIsImJldHRlck1lbnVJdGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJiZXR0ZXJTbGlkZXJzIiwiZXZ0IiwiaGFzQ2xhc3MiLCJzZWxlY3RvciIsInRhcmdldFNsaWRlciIsInRhcmdldENvbnRyb2wiLCJlYWNoIiwiaSIsImVsIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsaUJBQUEsa0JBQ0FDLGlCQUFBLGtCQU1BLFNBQUFDLFFBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsSUFBQUMsRUFBQUosRUFHQSxPQUZBQSxFQUFBSyxLQUFBQyxJQUFBTixHQUVBLElBREFBLEdBQUEsTUFDQUEsR0FBQSxHQUNBSSxFQUFBLElBQUFELEVBR0EsS0FEQUgsR0FBQSxJQUVBSSxFQUFBLElBQUFILEVBRUEsR0FBQUQsR0FBQUEsR0FBQSxFQUNBSSxFQUFBLElBQUFGLEVBRUFFLEVBQUEsSUFBQUQsRUFPQSxTQUFBSSxTQUFBQyxHQUNBLElBQUFDLEVBQUEsSUFBQUMsS0FDQUMsRUFBQSxJQUFBRCxLQUNBRSxFQUFBLElBQUFGLEtBQ0FDLEVBQUFFLFFBQUFGLEVBQUFHLFVBQUEsR0FDQUYsRUFBQUMsUUFBQUQsRUFB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LHlCQUNBUyxRQUFBVCxtQkFBQSx3QkFBQSx5QkFFQWxGLEVBQUEsc0JBQUFvRSxNQUFBb0IsU0FDQXhGLEVBQUEsc0JBQUFvRSxNQUFBcUIsU0FDQXpGLEVBQUEsc0JBQUFvRSxNQUFBc0IsU0FDQTFGLEVBQUEsc0JBQUFvRSxNQUFBdUIsU0FFQSxJQUFBQyxLQUFBaEUsU0FBQWlFLGNBQUEsaUJBQ0FDLGdCQUFBRixLQUFBRyxpQkFBQSxzQkFDQUMsY0FBQXBFLFNBQUFtRSxpQkFBQSxtQkFFQS9GLEVBQUEsc0JBQUF5QixNQUFBLFNBQUF3RSxHQUNBLElBQUFqRyxFQUFBOEQsTUFBQW9DLFNBQUEsNkJBQUEsQ0FHQSxJQUFBQyxFQUFBbkcsRUFBQThELE1BQUE1QyxPQUFBcUIsSUFDQTZELEVBQUFwRyxFQUFBLDZCQUFBbUcsRUFBQSxNQUNBRSxFQUFBckcsRUFBQSwrQkFBQW1HLEVBQUEsTUFFQW5HLEVBQUEsbUJBQUFzRyxLQUFBLFNBQUFDLEVBQUFDLEdBQ0F4RyxFQUFBd0csR0FBQUMsWUFBQSw0QkFFQXpHLEVBQUEscUJBQUFzRyxLQUFBLFNBQUFDLEVBQUFDLEdBQ0F4RyxFQUFBd0csR0FBQUMsWUFBQSw4QkFFQXpHLEVBQUEsc0JBQUFzRyxLQUFBLFNBQUFDLEVBQUFDLEdBQ0F4RyxFQUFBd0csR0FBQUMsWUFBQSwrQkFHQXpHLEVBQUE4RCxNQUFBNEMsU0FBQSw2QkFDQU4sRUFBQU0sU0FBQSwwQkFDQUwsRUFBQUssU0FBQSw0QkFDQU4sRUFBQWhDLE1BQUEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiAgLy8g0KTQvtGA0LzQuNGA0YPQtdC8INGE0L7RgNC80Ysg0LfQsNC60LDQt9GLXG4gIGNvbnN0IGhlYWRlckZvcm1TZWxlY3QgPSAnLmhlYWRlcl9fc2VhcmNoJztcbiAgY29uc3QgZm9vdGVyRm9ybVNlbGVjdCA9ICcuZm9vdGVyX19zZWFyY2gnO1xuXG4gIG1ha2VGb3JtKGhlYWRlckZvcm1TZWxlY3QpO1xuICBtYWtlRm9ybShmb290ZXJGb3JtU2VsZWN0KTtcblxuLy8g0KHQutC70L7QvdC10L3QuNC1XG5mdW5jdGlvbiBnZXROb3VuKG51bWJlciwgb25lLCB0d28sIGZpdmUpIHtcbiAgY29uc3QgaW5pdE51bWJlciA9IG51bWJlclxuICBudW1iZXIgPSBNYXRoLmFicyhudW1iZXIpXG4gIG51bWJlciAlPSAxMDBcbiAgaWYgKG51bWJlciA+PSA1ICYmIG51bWJlciA8PSAyMCkge1xuICAgIHJldHVybiBpbml0TnVtYmVyICsgJyAnICsgZml2ZVxuICB9XG4gIG51bWJlciAlPSAxMFxuICBpZiAobnVtYmVyID09PSAxKSB7XG4gICAgcmV0dXJuIGluaXROdW1iZXIgKyAnICcgKyBvbmVcbiAgfVxuICBpZiAobnVtYmVyID49IDIgJiYgbnVtYmVyIDw9IDQpIHtcbiAgICByZXR1cm4gaW5pdE51bWJlciArICcgJyArIHR3b1xuICB9XG4gIHJldHVybiBpbml0TnVtYmVyICsgJyAnICsgZml2ZVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG4gIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg0KTQvtGA0LzQsCDQv9C+0LjRgdC60LAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG5cbiAgZnVuY3Rpb24gbWFrZUZvcm0oc2VsZWN0aW9uKSB7XG4gICAgY29uc3QgY3VyRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgY2hlY2tEYXkgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IGV2aWN0RGF5ID0gbmV3IERhdGUoKTtcbiAgICBjaGVja0RheS5zZXREYXRlKGNoZWNrRGF5LmdldERhdGUoKSArIDEpO1xuICAgIGV2aWN0RGF5LnNldERhdGUoZXZpY3REYXkuZ2V0RGF0ZSgpICsgMik7XG5cbiAgICAvLyAqKioqKioqKioqKioqKiogKirQodC40L3RhdGA0L7QvdC40LfQsNGG0LjRjyDQutCw0LvQtdC90LTQsNGA0LXQuSAqKioqKioqKioqKioqKioqKioqKioqKiogLy9cbiAgICAkKGAke3NlbGVjdGlvbn0gLmNoZWNrLWNhbGVuZGFyYCkuZGF0ZXBpY2tlcih7XG4gICAgICBtaW5EYXRlOiBjdXJEYXRlLFxuICAgICAgdG9nZ2xlU2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgZGF0ZUZvcm1hdDogJ2QsIE1NJyxcbiAgICAgIHBvc2l0aW9uOiBcImJvdHRvbSBjZW50ZXJcIixcbiAgICAgIG9uU2VsZWN0OiBmdW5jdGlvbiAoZmQsIGQsIHBpY2tlcnMpIHtcbiAgICAgICAgaWYgKGQgPT09ICcnKSB7XG4gICAgICAgICAgcGlja2Vycy4kZWwudmFsKCfQktGL0LHQtdGA0LjRgtC1INC00LDRgtGDJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgZGF0ZSA9IG1vbWVudChkKS5mb3JtYXQoJ0REIE1NTU0nKTtcbiAgICAgICAgICBwaWNrZXJzLiRlbC5hdHRyKCd2YWx1ZScsIGRhdGUpO1xuICAgICAgICAgIHBpY2tlcnMuJGVsLnZhbChkYXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVwZE1pbiA9IG5ldyBEYXRlKGQpO1xuICAgICAgICB1cGRNaW4uc2V0RGF0ZSh1cGRNaW4uZ2V0RGF0ZSgpICsgMSk7XG5cbiAgICAgICAgLy8g0JzQtdC90Y/QtdC8INC80LjQvSDQt9C90LDRh9C10L3QuNC1INCyINC60LDQu9C10L3QtNCw0YDQtSDQstGL0YHQtdC70LXQvdC40Y9cbiAgICAgICAgY29uc3QgZGF0ZXBpY2tlciA9ICQoYCR7c2VsZWN0aW9ufSAuZXZpY3Rpb24tY2FsZW5kYXJgKS5kYXRlcGlja2VyKCkuZGF0YSgnZGF0ZXBpY2tlcicpO1xuXG4gICAgICAgIGlmIChkID49IGRhdGVwaWNrZXIuZGF0ZSkge1xuICAgICAgICAgIGRhdGVwaWNrZXIudXBkYXRlKCdtaW5EYXRlJywgdXBkTWluKTtcbiAgICAgICAgICBkYXRlcGlja2VyLnNlbGVjdERhdGUodXBkTWluKTtcbiAgICAgICAgICAkKGAke3NlbGVjdGlvbn0gLmV2aWN0aW9uLWNhbGVuZGFyYCkudmFsKG1vbWVudCh1cGRNaW4pLmZvcm1hdCgnREQgTU1NTScpKVxuICAgICAgICAgICQoYCR7c2VsZWN0aW9ufSAuZXZpY3Rpb24tY2FsZW5kYXJgKS5hdHRyKCd2YWx1ZScsIG1vbWVudCh1cGRNaW4pLmZvcm1hdCgnREQgTU1NTScpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGVwaWNrZXIudXBkYXRlKCdtaW5EYXRlJywgdXBkTWluKTtcbiAgICAgICAgICAkKGAke3NlbGVjdGlvbn0gLmV2aWN0aW9uLWNhbGVuZGFyYCkudmFsKG1vbWVudChkYXRlcGlja2VyLmRhdGUpLmZvcm1hdCgnREQgTU1NTScpKVxuICAgICAgICAgICQoYCR7c2VsZWN0aW9ufSAuZXZpY3Rpb24tY2FsZW5kYXJgKS5hdHRyKCd2YWx1ZScsIG1vbWVudChkYXRlcGlja2VyLmRhdGUpLmZvcm1hdCgnREQgTU1NTScpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAkKGAke3NlbGVjdGlvbn0gLmV2aWN0aW9uLWNhbGVuZGFyYCkuZGF0ZXBpY2tlcih7XG4gICAgICBtaW5EYXRlOiBldmljdERheSxcbiAgICAgIHRvZ2dsZVNlbGVjdGVkOiBmYWxzZSxcbiAgICAgIGRhdGVGb3JtYXQ6ICdkLCBNTScsXG4gICAgICBwb3NpdGlvbjogXCJib3R0b20gY2VudGVyXCIsXG4gICAgICBvblNlbGVjdDogZnVuY3Rpb24gKGZkLCBkLCBwaWNrZXJzKSB7XG4gICAgICAgIGlmIChkID09PSAnJykge1xuICAgICAgICAgIHBpY2tlcnMuJGVsLnZhbCgn0JLRi9Cx0LXRgNC40YLQtSDQtNCw0YLRgycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGRhdGUgPSBtb21lbnQoZCkuZm9ybWF0KCdERCBNTU1NJyk7XG4gICAgICAgICAgcGlja2Vycy4kZWwuYXR0cigndmFsdWUnLCBkYXRlKTtcbiAgICAgICAgICBwaWNrZXJzLiRlbC52YWwoZGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIC8vXG5cbiAgICAvLyDQl9C90LDRh9C10L3QuNGPINC/0L4t0YPQvNC+0LvRh9Cw0L3QuNGOXG4gICAgY29uc3QgZGVmRGF5ID0gbW9tZW50KCk7XG5cbiAgICBkZWZEYXkubG9jYWxlKCdydScpXG4gICAgJChgJHtzZWxlY3Rpb259IC5jaGVjay1jYWxlbmRhcmApLmF0dHIoJ3ZhbHVlJywgbW9tZW50KGRlZkRheSkuYWRkKDEsICdkYXlzJykuZm9ybWF0KCdERCBNTU1NJykpO1xuICAgICQoYCR7c2VsZWN0aW9ufSAuZXZpY3Rpb24tY2FsZW5kYXJgKS5hdHRyKCd2YWx1ZScsIG1vbWVudChkZWZEYXkpLmFkZCgyLCAnZGF5cycpLmZvcm1hdCgnREQgTU1NTScpKTtcblxuXG4gICAgY29uc3QgY2hlY2tDYWxlbmRhciA9ICQoYCR7c2VsZWN0aW9ufSAuY2hlY2stY2FsZW5kYXJgKS5kYXRlcGlja2VyKCkuZGF0YSgnZGF0ZXBpY2tlcicpO1xuICAgIGNoZWNrQ2FsZW5kYXIuc2VsZWN0RGF0ZShjaGVja0RheSk7XG5cbiAgICBjb25zdCBldmljdGlvbkNhbGVuZGFyID0gJChgJHtzZWxlY3Rpb259IC5ldmljdGlvbi1jYWxlbmRhcmApLmRhdGVwaWNrZXIoKS5kYXRhKCdkYXRlcGlja2VyJyk7XG4gICAgZXZpY3Rpb25DYWxlbmRhci5zZWxlY3REYXRlKGV2aWN0RGF5KTtcblxuICAgIC8vICoqKioqKioqKioqKiDQmtC+0LvQuNGH0LXRgdGC0LLQviDQs9C+0YHRgtC10LkgKioqKioqKioqKioqKioqKiAvL1xuICAgIC8vINCS0YvQv9Cw0LTQsNGO0YnQtdC1INC80LXQvdGOXG4gICAgbGV0IG9wZW5lZCA9IGZhbHNlO1xuXG4gICAgJChgJHtzZWxlY3Rpb259IC5ndWVzdGApLmNsaWNrKChlKSA9PiB7XG4gICAgICBpZiAoIW9wZW5lZCkge1xuICAgICAgICAkKGAke3NlbGVjdGlvbn0gLnNlYXJjaF9fZ3Vlc3QtY2hhbmdlYCkuZmFkZVRvZ2dsZSgyMDApO1xuICAgICAgICBvcGVuZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyDQodC60YDRi9GC0LjQtSDQv9GA0Lgg0LrQu9C40LrQtSDQstC90LUg0L7QutC90LBcbiAgICAkKGRvY3VtZW50KS5tb3VzZXVwKGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgY29udGFpbmVyID0gJChgJHtzZWxlY3Rpb259IC5zZWFyY2hfX2d1ZXN0LWNoYW5nZWApO1xuICAgICAgaWYgKGNvbnRhaW5lci5oYXMoZS50YXJnZXQpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBpZiAob3BlbmVkKSB7XG4gICAgICAgICAgY29udGFpbmVyLmZhZGVPdXQoKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIG9wZW5lZCA9IGZhbHNlO1xuICAgICAgICAgIH0sIDIwMClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8g0JLQt9GA0L7RgdC70YvQtVxuICAgIGNvbnN0IGFkdWx0U3VtID0gJChgJHtzZWxlY3Rpb259IC5hZHVsdC1zdW1gKTtcbiAgICBjb25zdCBhZHVsdFBsdXMgPSAkKGAke3NlbGVjdGlvbn0gLmFkdWx0LXBsdXNgKTtcbiAgICBjb25zdCBhZHVsdE1pbnVzID0gJChgJHtzZWxlY3Rpb259IC5hZHVsdC1taW51c2ApO1xuXG4gICAgYWR1bHRQbHVzLmNsaWNrKChlKSA9PiB7XG4gICAgICBsZXQgbnVtID0gYWR1bHRTdW0udGV4dCgpXG4gICAgICBpZiAobnVtIDwgNikge1xuICAgICAgICBudW0rKztcbiAgICAgICAgYWR1bHRTdW0udGV4dChudW0pXG4gICAgICB9XG5cbiAgICAgIGNhbGNTdW1PZkd1ZXN0cygpO1xuICAgIH0pO1xuXG4gICAgYWR1bHRNaW51cy5jbGljaygoZSkgPT4ge1xuICAgICAgbGV0IG51bSA9IGFkdWx0U3VtLnRleHQoKVxuICAgICAgaWYgKG51bSA+IDEpIHtcbiAgICAgICAgbnVtLS07XG4gICAgICAgIGFkdWx0U3VtLnRleHQobnVtKVxuICAgICAgfVxuXG4gICAgICBjYWxjU3VtT2ZHdWVzdHMoKTtcbiAgICB9KTtcblxuICAgIC8vINCU0LXRgtC4XG4gICAgY29uc3QgY2hpbGRTdW0gPSAkKGAke3NlbGVjdGlvbn0gLmNoaWxkLXN1bWApO1xuICAgIGNvbnN0IGNoaWxkUGx1cyA9ICQoYCR7c2VsZWN0aW9ufSAuY2hpbGQtcGx1c2ApO1xuICAgIGNvbnN0IGNoaWxkTWludXMgPSAkKGAke3NlbGVjdGlvbn0gLmNoaWxkLW1pbnVzYCk7XG5cbiAgICBjaGlsZFBsdXMuY2xpY2soKGUpID0+IHtcbiAgICAgIGxldCBudW0gPSBjaGlsZFN1bS50ZXh0KClcbiAgICAgIGlmIChudW0gPCA1KSB7XG4gICAgICAgIG51bSsrO1xuICAgICAgICBjaGlsZFN1bS50ZXh0KG51bSlcbiAgICAgIH1cblxuICAgICAgY2FsY1N1bU9mR3Vlc3RzKCk7XG4gICAgfSk7XG5cbiAgICBjaGlsZE1pbnVzLmNsaWNrKChlKSA9PiB7XG4gICAgICBsZXQgbnVtID0gY2hpbGRTdW0udGV4dCgpXG4gICAgICBpZiAobnVtID4gMCkge1xuICAgICAgICBudW0tLTtcbiAgICAgICAgY2hpbGRTdW0udGV4dChudW0pXG4gICAgICB9XG5cbiAgICAgIGNhbGNTdW1PZkd1ZXN0cygpO1xuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gY2FsY1N1bU9mR3Vlc3RzKCkge1xuICAgICAgY29uc3QgZnVsbFN1bSA9IHBhcnNlSW50KGFkdWx0U3VtLnRleHQoKSkgKyBwYXJzZUludChjaGlsZFN1bS50ZXh0KCkpO1xuICAgICAgY29uc3QgY29uY2F0U3RyaW5nID0gZ2V0Tm91bihmdWxsU3VtLCAn0LPQvtGB0YLRjycsICfQs9C+0YHRgtC10LknLCAn0LPQvtGB0YLQtdC5Jyk7XG4gICAgICAkKGAke3NlbGVjdGlvbn0gLmZ1bGwtc3VtYCkudGV4dChjb25jYXRTdHJpbmcpO1xuXG4gICAgICBpZiAocGFyc2VJbnQoYWR1bHRTdW0udGV4dCgpKSA9PT0gMSkge1xuICAgICAgICBhZHVsdE1pbnVzLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhZHVsdE1pbnVzLmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyc2VJbnQoYWR1bHRTdW0udGV4dCgpKSA9PT0gNikge1xuICAgICAgICBhZHVsdFBsdXMuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFkdWx0UGx1cy5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcnNlSW50KGNoaWxkU3VtLnRleHQoKSkgPT09IDApIHtcbiAgICAgICAgY2hpbGRNaW51cy5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hpbGRNaW51cy5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcnNlSW50KGNoaWxkU3VtLnRleHQoKSkgPT09IDUpIHtcbiAgICAgICAgY2hpbGRQbHVzLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGlsZFBsdXMuYXR0cignZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmdWxsU3VtXG4gICAgfVxuXG5cbiAgICAkKGAke3NlbGVjdGlvbn0gLmNoZWNrYCkuY2xpY2soKGUpID0+IHtcbiAgICAgICQoYCR7c2VsZWN0aW9ufSAuY2hlY2stY2FsZW5kYXJgKS5kYXRhKCdkYXRlcGlja2VyJykuc2hvdygpO1xuICAgIH0pXG5cbiAgICAkKGAke3NlbGVjdGlvbn0gLmV2aWN0aW9uYCkuY2xpY2soKGUpID0+IHtcbiAgICAgICQoYCR7c2VsZWN0aW9ufSAuZXZpY3Rpb24tY2FsZW5kYXJgKS5kYXRhKCdkYXRlcGlja2VyJykuc2hvdygpO1xuICAgIH0pXG5cbiAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIC8vXG5cbiAgICAkKGAke3NlbGVjdGlvbn0gLnNlYXJjaF9fZ290b2ApLmNsaWNrKChlKSA9PiB7XG4gICAgICBjb25zdCBjaGVja0RhdGEgPSAkKGAke3NlbGVjdGlvbn0gLmNoZWNrLWNhbGVuZGFyYCkuZGF0YSgnZGF0ZXBpY2tlcicpLnNlbGVjdGVkRGF0ZXM7XG4gICAgICBjb25zdCBldmljdERhdGEgPSAkKGAke3NlbGVjdGlvbn0gLmV2aWN0aW9uLWNhbGVuZGFyYCkuZGF0YSgnZGF0ZXBpY2tlcicpLnNlbGVjdGVkRGF0ZXM7XG4gICAgICBjb25zdCBndWVzdHMgPSBjYWxjU3VtT2ZHdWVzdHMoKTtcblxuICAgICAgY29uc3QgZm9ybWF0ZWRDaGVjayA9IG1vbWVudChjaGVja0RhdGFbMF0pLmZvcm1hdCgnREQuTU0uWVlZWScpO1xuICAgICAgY29uc3QgZm9ybWF0ZWRFdmljdCA9IG1vbWVudChldmljdERhdGFbMF0pLmZvcm1hdCgnREQuTU0uWVlZWScpO1xuICAgICAgY29uc3QgY29tcGFyZVN0cmluZyA9IGBodHRwczovL29zdHJvdm9rLnJ1L2hvdGVsL3VuaXRlZF9hcmFiX2VtaXJhdGVzL2FidV9kaGFiaS8/cT00NTMmZGF0ZXM9JHtmb3JtYXRlZENoZWNrfS0ke2Zvcm1hdGVkRXZpY3R9Jmd1ZXN0cz0ke2d1ZXN0c31gXG5cbiAgICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gY29tcGFyZVN0cmluZztcbiAgICAgIHdpbmRvdy5vcGVuKGNvbXBhcmVTdHJpbmcsICdfYmxhbmsnKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGZvcm1hdGVkQ2hlY2spXG4gICAgICAvLyBjb25zb2xlLmxvZyhmb3JtYXRlZEV2aWN0KVxuICAgICAgLy8gY29uc29sZS5sb2coZ3Vlc3RzKVxuICAgICAgLy8gY29uc29sZS5sb2coY29tcGFyZVN0cmluZylcbiAgICB9KVxuICB9XG4iLCIgIGNvbnN0IGxpbWl0ID0gJCh3aW5kb3cpLmhlaWdodCgpIC8gNDtcbiAgY29uc3QgYmFja1RvVG9wID0gJCgnI3VwLWJ0bicpO1xuXG4gIC8vIEFwcGVhcmluZyBhbmQgZGlzYXBwZWFyaW5nIG9mIHRoZSAndXAnIGJ1dHRvbiBvbiB0aGUgZmlyc3Qgc2NyZWVuXG4gIC8vIGFuZCBmaXhlZCBtZW51IG9uIHRvcCBzY3JlZW5cbiAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCQodGhpcykuc2Nyb2xsVG9wKCkgPiBsaW1pdCkge1xuICAgICAgYmFja1RvVG9wLmZhZGVJbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBiYWNrVG9Ub3AuZmFkZU91dCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgIC8vIFNvZnQgc2Nyb2xsIHRvIHRoZSB0b3BcbiAgYmFja1RvVG9wLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAkKCdib2R5LCBodG1sJykuYW5pbWF0ZSh7c2Nyb2xsVG9wOiAwfSwgMTAwKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xuIiwiY29uc3QgVEFCTEVUX1dJRFRIID0gNzY4IC0gMTtcbmNvbnN0IERFU0tUT1BfV0lEVEggPSAxMTkwIC0gMTtcblxuJCgnLmFkdmFudGFnZXNfX3NsaWRlcicpLnNsaWNrKHtcbiAgc2xpZGVzVG9TaG93OiAxLFxuICBzbGlkZXNUb1Njcm9sbDogMSxcbiAgYXJyb3dzOiBmYWxzZSxcbiAgZG90czogdHJ1ZSxcbiAgbW9iaWxlRmlyc3Q6IHRydWUsXG4gIHJlc3BvbnNpdmU6IFtcbiAgICB7XG4gICAgICBicmVha3BvaW50OiBUQUJMRVRfV0lEVEgsXG4gICAgICBzZXR0aW5nczogJ3Vuc2xpY2snXG4gICAgfVxuICBdXG59KTtcblxuJCgnLnRyYW5zcG9ydF9fc2xpZGVyJykuc2xpY2soe1xuICBzbGlkZXNUb1Nob3c6IDEsXG4gIHNsaWRlc1RvU2Nyb2xsOiAxLFxuICBhcnJvd3M6IGZhbHNlLFxuICBkb3RzOiB0cnVlLFxuICBtb2JpbGVGaXJzdDogdHJ1ZSxcbiAgcmVzcG9uc2l2ZTogW1xuICAgIHtcbiAgICAgIGJyZWFrcG9pbnQ6IFRBQkxFVF9XSURUSCxcbiAgICAgIHNldHRpbmdzOiAndW5zbGljaydcbiAgICB9XG4gIF1cbn0pO1xuXG4kKCcubGlmZWhhY2tfX3NsaWRlcicpLnNsaWNrKHtcbiAgc2xpZGVzVG9TaG93OiAxLFxuICBzbGlkZXNUb1Njcm9sbDogMSxcbiAgYXJyb3dzOiBmYWxzZSxcbiAgZG90czogdHJ1ZSxcbiAgbW9iaWxlRmlyc3Q6IHRydWUsXG4gIHJlc3BvbnNpdmU6IFtcbiAgICB7XG4gICAgICBicmVha3BvaW50OiBUQUJMRVRfV0lEVEgsXG4gICAgICBzZXR0aW5nczogJ3Vuc2xpY2snXG4gICAgfVxuICBdXG59KTtcblxuJCgnLnN0b3BfX3NsaWRlcicpLnNsaWNrKHtcbiAgc2xpZGVzVG9TaG93OiAxLFxuICBzbGlkZXNUb1Njcm9sbDogMSxcbiAgYXJyb3dzOiBmYWxzZSxcbiAgZG90czogdHJ1ZSxcbiAgbW9iaWxlRmlyc3Q6IHRydWUsXG4gIHJlc3BvbnNpdmU6IFtcbiAgICB7XG4gICAgICBicmVha3BvaW50OiBUQUJMRVRfV0lEVEgsXG4gICAgICBzZXR0aW5nczogJ3Vuc2xpY2snXG4gICAgfVxuICBdXG59KTtcblxuJCgnLmRldGFpbHNfX3NsaWRlci1mb3InKS5zbGljayh7XG4gIHNsaWRlc1RvU2hvdzogMSxcbiAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gIGluaXRpYWxTbGlkZTogMixcbiAgY2VudGVyTW9kZTogZmFsc2UsXG4gIGRvdHM6IHRydWUsXG4gIGFycm93czogZmFsc2UsXG4gIGFzTmF2Rm9yOiAnLmRldGFpbHNfX3NsaWRlci1uYXYnLFxuICBtb2JpbGVGaXJzdDogdHJ1ZSxcbiAgcmVzcG9uc2l2ZTogW1xuICAgIHsgYnJlYWtwb2ludDogVEFCTEVUX1dJRFRILFxuICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICBjZW50ZXJNb2RlOiB0cnVlLFxuICAgICAgICB2YXJpYWJsZVdpZHRoOiB0cnVlXG4gICAgICB9XG4gICAgfVxuICBdXG59KTtcblxuJCgnLmRldGFpbHNfX3NsaWRlci1uYXYnKS5zbGljayh7XG4gIHNsaWRlc1RvU2hvdzogNCxcbiAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gIGluaXRpYWxTbGlkZTogMixcbiAgZG90czogZmFsc2UsXG4gIGFzTmF2Rm9yOiAnLmRldGFpbHNfX3NsaWRlci1mb3InLFxuICBmb2N1c09uU2VsZWN0OiB0cnVlLFxuICB2YXJpYWJsZVdpZHRoOiB0cnVlLFxuICBtb2JpbGVGaXJzdDogdHJ1ZSxcbiAgcmVzcG9uc2l2ZTogW1xuICAgIHsgYnJlYWtwb2ludDogVEFCTEVUX1dJRFRILFxuICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgc2xpZGVzVG9TaG93OiA2LFxuICAgICAgICBkb3RzOiB0cnVlLFxuICAgICAgfVxuICAgIH1cbiAgXVxufSk7XG5cbi8vINCf0LDRgNCw0LzQtdGC0YDRiyDRgdC70LDQudC00LXRgNC+0LIg0LTQvtGB0YLQvtC/0YDQuNC80LXRh9Cw0YLQtdC70YzQvdC+0YHRgtC10LlcbmNvbnN0IHNldFNsaWNrUGFyYW1ldGVycyA9IGZ1bmN0aW9uKGFycm93UHJldiwgYXJyb3dOZXh0KSB7XG4gIGNvbnN0IHNsaWNrUGFyYW1ldGVycyA9IHtcbiAgICBtb2JpbGVGaXJzdDogdHJ1ZSxcbiAgICBpbmZpbml0ZTogdHJ1ZSxcbiAgICBzbGlkZXNUb1Nob3c6IDEsXG4gICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgZG90czogZmFsc2UsXG4gICAgLy9hcnJvd3M6ICEwLFxuICAgIHByZXZBcnJvdzogJChhcnJvd1ByZXYpLFxuICAgIG5leHRBcnJvdzogJChhcnJvd05leHQpLFxuICAgIHJlc3BvbnNpdmU6IFtcbiAgICAgIHsgYnJlYWtwb2ludDogVEFCTEVUX1dJRFRILFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgIGNlbnRlck1vZGU6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7IGJyZWFrcG9pbnQ6IERFU0tUT1BfV0lEVEgsXG4gICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICB9XG4gICAgICB9XG4gICAgXVxuICB9XG4gIHJldHVybiBzbGlja1BhcmFtZXRlcnM7XG59O1xuXG5jb25zdCBiZXR0ZXIxID0gc2V0U2xpY2tQYXJhbWV0ZXJzKCcuYmV0dGVyX19hcnJvdy0tcHJldjEnLCAnLmJldHRlcl9fYXJyb3ctLW5leHQxJyk7XG5jb25zdCBiZXR0ZXIyID0gc2V0U2xpY2tQYXJhbWV0ZXJzKCcuYmV0dGVyX19hcnJvdy0tcHJldjInLCAnLmJldHRlcl9fYXJyb3ctLW5leHQyJyk7XG5jb25zdCBiZXR0ZXIzID0gc2V0U2xpY2tQYXJhbWV0ZXJzKCcuYmV0dGVyX19hcnJvdy0tcHJldjMnLCAnLmJldHRlcl9fYXJyb3ctLW5leHQzJyk7XG5jb25zdCBiZXR0ZXI0ID0gc2V0U2xpY2tQYXJhbWV0ZXJzKCcuYmV0dGVyX19hcnJvdy0tcHJldjQnLCAnLmJldHRlcl9fYXJyb3ctLW5leHQ0Jyk7XG5cbiQoJy5iZXR0ZXJfX3NsaWRlci0tMScpLnNsaWNrKGJldHRlcjEpO1xuJCgnLmJldHRlcl9fc2xpZGVyLS0yJykuc2xpY2soYmV0dGVyMik7XG4kKCcuYmV0dGVyX19zbGlkZXItLTMnKS5zbGljayhiZXR0ZXIzKTtcbiQoJy5iZXR0ZXJfX3NsaWRlci0tNCcpLnNsaWNrKGJldHRlcjQpO1xuXG5jb25zdCBtZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJldHRlcl9fbWVudScpO1xuY29uc3QgYmV0dGVyTWVudUl0ZW1zID0gbWVudS5xdWVyeVNlbGVjdG9yQWxsKCcuYmV0dGVyX19tZW51LWl0ZW0nKTtcbmNvbnN0IGJldHRlclNsaWRlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYmV0dGVyX19zbGlkZXInKTtcblxuJCgnLmJldHRlcl9fbWVudS1pdGVtJykuY2xpY2soZnVuY3Rpb24gKGV2dCkge1xuICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnYmV0dGVyX19tZW51LWl0ZW0tLWFjdGl2ZScpKSB7XG4gICAgcmV0dXJuO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHNlbGVjdG9yID0gJCh0aGlzKS5kYXRhKCkubnVtO1xuICAgIGNvbnN0IHRhcmdldFNsaWRlciA9ICQoJy5iZXR0ZXJfX3NsaWRlcltkYXRhLW51bT1cIicgKyBzZWxlY3RvciArICdcIl0nKTsgLy8g0KHQtdC70LXQutGCINC90YPQttC90L7Qs9C+INCx0LvQvtC60LBcbiAgICBjb25zdCB0YXJnZXRDb250cm9sID0gJCgnLmJldHRlcl9fY29udHJvbHNbZGF0YS1udW09XCInICsgc2VsZWN0b3IgKyAnXCJdJyk7XG5cbiAgICAkKCcuYmV0dGVyX19zbGlkZXInKS5lYWNoKGZ1bmN0aW9uIChpLCBlbCkge1xuICAgICAgJChlbCkucmVtb3ZlQ2xhc3MoJ2JldHRlcl9fc2xpZGVyLS1hY3RpdmUnKTtcbiAgICB9KTtcbiAgICAkKCcuYmV0dGVyX19jb250cm9scycpLmVhY2goZnVuY3Rpb24gKGksIGVsKSB7XG4gICAgICAkKGVsKS5yZW1vdmVDbGFzcygnYmV0dGVyX19jb250cm9scy0tYWN0aXZlJyk7XG4gICAgfSk7XG4gICAgJCgnLmJldHRlcl9fbWVudS1pdGVtJykuZWFjaChmdW5jdGlvbiAoaSwgZWwpIHtcbiAgICAgICQoZWwpLnJlbW92ZUNsYXNzKCdiZXR0ZXJfX21lbnUtaXRlbS0tYWN0aXZlJyk7XG4gICAgfSk7XG5cbiAgICAkKHRoaXMpLmFkZENsYXNzKCdiZXR0ZXJfX21lbnUtaXRlbS0tYWN0aXZlJyk7XG4gICAgdGFyZ2V0U2xpZGVyLmFkZENsYXNzKCdiZXR0ZXJfX3NsaWRlci0tYWN0aXZlJyk7XG4gICAgdGFyZ2V0Q29udHJvbC5hZGRDbGFzcygnYmV0dGVyX19jb250cm9scy0tYWN0aXZlJyk7XG4gICAgdGFyZ2V0U2xpZGVyLnNsaWNrKCdyZWZyZXNoJyk7XG4gIH1cbn0pO1xuIl19
