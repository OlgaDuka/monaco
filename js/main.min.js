"use strict";var headerFormSelect=".header__search",footerFormSelect=".footer__search";function getNoun(e,t,a,r){var i=e;return e=Math.abs(e),5<=(e%=100)&&e<=20?i+" "+r:1===(e%=10)?i+" "+t:2<=e&&e<=4?i+" "+a:i+" "+r}function makeForm(o){var e=new Date,t=new Date,a=new Date;t.setDate(t.getDate()+1),a.setDate(a.getDate()+2),$("".concat(o," .check-calendar")).datepicker({minDate:e,toggleSelected:!1,dateFormat:"d, MM",position:"bottom center",onSelect:function(e,t,a){if(""===t)a.$el.val("Выберите дату");else{var r=moment(t).format("DD MMMM");a.$el.attr("value",r),a.$el.val(r)}var i=new Date(t);i.setDate(i.getDate()+1);var s=$("".concat(o," .eviction-calendar")).datepicker().data("datepicker");t>=s.date?(s.update("minDate",i),s.selectDate(i),$("".concat(o," .eviction-calendar")).val(moment(i).format("DD MMMM")),$("".concat(o," .eviction-calendar")).attr("value",moment(i).format("DD MMMM"))):(s.update("minDate",i),$("".concat(o," .eviction-calendar")).val(moment(s.date).format("DD MMMM")),$("".concat(o," .eviction-calendar")).attr("value",moment(s.date).format("DD MMMM")))}}),$("".concat(o," .eviction-calendar")).datepicker({minDate:a,toggleSelected:!1,dateFormat:"d, MM",position:"bottom center",onSelect:function(e,t,a){if(""===t)a.$el.val("Выберите дату");else{var r=moment(t).format("DD MMMM");a.$el.attr("value",r),a.$el.val(r)}}});var r=moment();r.locale("ru"),$("".concat(o," .check-calendar")).attr("value",moment(r).add(1,"days").format("DD MMMM")),$("".concat(o," .eviction-calendar")).attr("value",moment(r).add(2,"days").format("DD MMMM")),$("".concat(o," .check-calendar")).datepicker().data("datepicker").selectDate(t),$("".concat(o," .eviction-calendar")).datepicker().data("datepicker").selectDate(a);var i=!1;$("".concat(o," .guest")).click(function(e){i||($("".concat(o," .search__guest-change")).fadeToggle(200),i=!0)}),$(document).mouseup(function(e){var t=$("".concat(o," .search__guest-change"));0===t.has(e.target).length&&i&&(t.fadeOut(),setTimeout(function(){i=!1},200))});var s=$("".concat(o," .adult-sum")),n=$("".concat(o," .adult-plus")),c=$("".concat(o," .adult-minus"));n.click(function(e){var t=s.text();t<6&&(t++,s.text(t)),_()}),c.click(function(e){var t=s.text();1<t&&(t--,s.text(t)),_()});var d=$("".concat(o," .child-sum")),l=$("".concat(o," .child-plus")),m=$("".concat(o," .child-minus"));function _(){var e=parseInt(s.text())+parseInt(d.text()),t=getNoun(e,"гостя","гостей","гостей");return $("".concat(o," .full-sum")).text(t),1===parseInt(s.text())?c.attr("disabled",!0):c.attr("disabled",!1),6===parseInt(s.text())?n.attr("disabled",!0):n.attr("disabled",!1),0===parseInt(d.text())?m.attr("disabled",!0):m.attr("disabled",!1),5===parseInt(d.text())?l.attr("disabled",!0):l.attr("disabled",!1),e}l.click(function(e){var t=d.text();t<5&&(t++,d.text(t)),_()}),m.click(function(e){var t=d.text();0<t&&(t--,d.text(t)),_()}),$("".concat(o," .check")).click(function(e){$("".concat(o," .check-calendar")).data("datepicker").show()}),$("".concat(o," .eviction")).click(function(e){$("".concat(o," .eviction-calendar")).data("datepicker").show()}),$("".concat(o," .search__goto")).click(function(e){var t=$("".concat(o," .check-calendar")).data("datepicker").selectedDates,a=$("".concat(o," .eviction-calendar")).data("datepicker").selectedDates,r=_(),i=moment(t[0]).format("DD.MM.YYYY"),s=moment(a[0]).format("DD.MM.YYYY"),n="https://ostrovok.ru/hotel/united_arab_emirates/abu_dhabi/?q=453&dates=".concat(i,"-").concat(s,"&guests=").concat(r);window.open(n,"_blank")})}makeForm(headerFormSelect),makeForm(footerFormSelect);var feed=new Instafeed({get:"user",userId:14110486070,accessToken:"14110486070.1677ed0.e29f390d542548cc9d383954ff2b2f3a",target:"Instafeed",resolution:"thumbnail",limit:50,template:'<li><img src="{{image}}" /></li>'});feed.run();var TABLET_WIDTH=767,DESKTOP_WIDTH=1189;window.onload=function(){$(window).scrollTop(0)},$(".lazy").slick({lazyLoad:"progressive"}),$(".advantages__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:"unslick"}]}),$(".transport__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:"unslick"}]}),$(".lifehack__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:"unslick"}]}),$(".stop__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:"unslick"}]}),$(".details__slider-for").slick({slidesToShow:1,slidesToScroll:1,centerMode:!1,dots:!0,arrows:!1,asNavFor:".details__slider-nav",mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:{slidesToShow:1,centerMode:!0,variableWidth:!0}},{breakpoint:DESKTOP_WIDTH,settings:{slidesToShow:1,centerMode:!0,variableWidth:!0,arrows:!0,prevArrow:$(".details__arrow--prev"),nextArrow:$(".details__arrow--next")}}]}),$(".details__slider-nav").slick({slidesToShow:4,slidesToScroll:1,dots:!1,arrows:!1,asNavFor:".details__slider-for",focusOnSelect:!0,variableWidth:!0,mobileFirst:!0,responsive:[{breakpoint:TABLET_WIDTH,settings:{slidesToShow:6,dots:!0}}]}),$(".details__slider-for").slick("slickGoTo",2),$(".details").show();for(var setSlickParameters=function(e,t){return{mobileFirst:!0,infinite:!0,slidesToShow:2,slidesToScroll:1,centerMode:!0,variableWidth:!0,dots:!1,prevArrow:$(e),nextArrow:$(t),responsive:[{breakpoint:DESKTOP_WIDTH,settings:{variableWidth:!0,centerMode:!1,slidesToShow:2}}]}},i=1;i<=4;i++){var nameSlider=".better__slider--".concat(i),parameters=setSlickParameters(".better__arrow--prev".concat(i),".better__arrow--next".concat(i));$(nameSlider).slick(parameters),$(nameSlider).find(".better__wrap-text").hide(),$(nameSlider).find('.better__wrap-text[data-text="0"]').show(),$(nameSlider).on("beforeChange",beforeChangeHandler)}$('.better__menu-item[data-num="1"]').find('.better__submenu-item[data-subnum="0"]').addClass("better__submenu-item--active");var toggleSubmenu=function(e,t,a){$('.better__menu-item[data-num="'+a+'"]').find('.better__submenu-item[data-subnum="'+e+'"]').removeClass("better__submenu-item--active"),$('.better__menu-item[data-num="'+a+'"]').find('.better__submenu-item[data-subnum="'+t+'"]').addClass("better__submenu-item--active")};function beforeChangeHandler(e,t,a,r){var i=t.$slider.data().num,s=$('.better__slider[data-num="'+i+'"]');s.find('.better__title[data-title="'+a+'"]').hide(),s.find('.better__title[data-title="'+r+'"]').show(),s.find('.better__wrap-text[data-text="'+a+'"]').hide(),s.find('.better__wrap-text[data-text="'+r+'"]').show(),toggleSubmenu(a,r,i)}$(".better__menu-item").click(function(e){if(!$(this).hasClass("better__menu-item--active")){var t=$(this).data().num,a=$('.better__slider[data-num="'+t+'"]'),r=$('.better__controls[data-num="'+t+'"]');$(".better").find(".better__slider--active").off("beforeChange",beforeChangeHandler),a.on("beforeChange",beforeChangeHandler),$(".better").find(".better__slider--active").removeClass("better__slider--active"),$(".better").find(".better__menu-item--active").removeClass("better__menu-item--active"),$(".better").find(".better__submenu-item--active").removeClass("better__submenu-item--active"),$(".better").find(".better__controls--active").removeClass("better__controls--active"),$(this).addClass("better__menu-item--active"),a.addClass("better__slider--active"),r.addClass("better__controls--active"),$(".better").find(".better__slider--active").slick("slickGoTo",0),$('.better__menu-item[data-num="'+t+'"]').find('.better__submenu-item[data-subnum="0"]').addClass("better__submenu-item--active"),a.slick("refresh")}}),$(".better__submenu-item").click(function(e){if(!$(this).hasClass("better__submenu-item--active")){var t=$(this).data().subnum;$(".better").find(".better__slider--active").slick("slickGoTo",t),$(".better").find(".better__submenu-item--active").removeClass("better__submenu-item--active"),$(this).addClass("better__submenu-item--active")}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm0uanMiLCJpbnN0YS5qcyIsInNsaWRlci5qcyJdLCJuYW1lcyI6WyJoZWFkZXJGb3JtU2VsZWN0IiwiZm9vdGVyRm9ybVNlbGVjdCIsImdldE5vdW4iLCJudW1iZXIiLCJvbmUiLCJ0d28iLCJmaXZlIiwiaW5pdE51bWJlciIsIk1hdGgiLCJhYnMiLCJtYWtlRm9ybSIsInNlbGVjdGlvbiIsImN1ckRhdGUiLCJEYXRlIiwiY2hlY2tEYXkiLCJldmljdERheSIsInNldERhdGUiLCJnZXREYXRlIiwiJCIsImNvbmNhdCIsImRhdGVwaWNrZXIiLCJtaW5EYXRlIiwidG9nZ2xlU2VsZWN0ZWQiLCJkYXRlRm9ybWF0IiwicG9zaXRpb24iLCJvblNlbGVjdCIsImZkIiwiZCIsInBpY2tlcnMiLCIkZWwiLCJ2YWwiLCJkYXRlIiwibW9tZW50IiwiZm9ybWF0IiwiYXR0ciIsInVwZE1pbiIsImRhdGEiLCJ1cGRhdGUiLCJzZWxlY3REYXRlIiwiZGVmRGF5IiwibG9jYWxlIiwiYWRkIiwib3BlbmVkIiwiY2xpY2siLCJlIiwiZmFkZVRvZ2dsZSIsImRvY3VtZW50IiwibW91c2V1cCIsImNvbnRhaW5lciIsImhhcyIsInRhcmdldCIsImxlbmd0aCIsImZhZGVPdXQiLCJzZXRUaW1lb3V0IiwiYWR1bHRTdW0iLCJhZHVsdFBsdXMiLCJhZHVsdE1pbnVzIiwibnVtIiwidGV4dCIsImNhbGNTdW1PZkd1ZXN0cyIsImNoaWxkU3VtIiwiY2hpbGRQbHVzIiwiY2hpbGRNaW51cyIsImZ1bGxTdW0iLCJwYXJzZUludCIsImNvbmNhdFN0cmluZyIsInNob3ciLCJjaGVja0RhdGEiLCJzZWxlY3RlZERhdGVzIiwiZXZpY3REYXRhIiwiZ3Vlc3RzIiwiZm9ybWF0ZWRDaGVjayIsImZvcm1hdGVkRXZpY3QiLCJjb21wYXJlU3RyaW5nIiwid2luZG93Iiwib3BlbiIsImZlZWQiLCJJbnN0YWZlZWQiLCJnZXQiLCJ1c2VySWQiLCJhY2Nlc3NUb2tlbiIsInJlc29sdXRpb24iLCJsaW1pdCIsInRlbXBsYXRlIiwicnVuIiwiVEFCTEVUX1dJRFRIIiwiREVTS1RPUF9XSURUSCIsIm9ubG9hZCIsInNjcm9sbFRvcCIsInNsaWNrIiwibGF6eUxvYWQiLCJzbGlkZXNUb1Nob3ciLCJzbGlkZXNUb1Njcm9sbCIsImFycm93cyIsImRvdHMiLCJtb2JpbGVGaXJzdCIsInJlc3BvbnNpdmUiLCJicmVha3BvaW50Iiwic2V0dGluZ3MiLCJjZW50ZXJNb2RlIiwiYXNOYXZGb3IiLCJ2YXJpYWJsZVdpZHRoIiwicHJldkFycm93IiwibmV4dEFycm93IiwiZm9jdXNPblNlbGVjdCIsInNldFNsaWNrUGFyYW1ldGVycyIsImFycm93UHJldiIsImFycm93TmV4dCIsImluZmluaXRlIiwiaSIsIm5hbWVTbGlkZXIiLCJwYXJhbWV0ZXJzIiwiZmluZCIsImhpZGUiLCJvbiIsImJlZm9yZUNoYW5nZUhhbmRsZXIiLCJhZGRDbGFzcyIsInRvZ2dsZVN1Ym1lbnUiLCJudW1DdXJyZW50U2xpZGUiLCJudW1OZXh0U2xpZGUiLCJudW1TbGlkZXIiLCJyZW1vdmVDbGFzcyIsImV2ZW50IiwiY3VycmVudFNsaWRlIiwibmV4dFNsaWRlIiwiJHNsaWRlciIsInRhcmdldFNsaWRlciIsImV2dCIsInRoaXMiLCJoYXNDbGFzcyIsIm1lbnVJdGVtIiwidGFyZ2V0Q29udHJvbCIsIm9mZiIsInN1Ym1lbnVJdGVtIiwic3VibnVtIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxpQkFBQSxrQkFDQUMsaUJBQUEsa0JBTUEsU0FBQUMsUUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQSxJQUFBQyxFQUFBSixFQUdBLE9BRkFBLEVBQUFLLEtBQUFDLElBQUFOLEdBRUEsSUFEQUEsR0FBQSxNQUNBQSxHQUFBLEdBQ0FJLEVBQUEsSUFBQUQsRUFHQSxLQURBSCxHQUFBLElBRUFJLEVBQUEsSUFBQUgsRUFFQSxHQUFBRCxHQUFBQSxHQUFBLEVBQ0FJLEVBQUEsSUFBQUYsRUFFQUUsRUFBQSxJQUFBRCxFQU9BLFNBQUFJLFNBQUFDLEdBQ0EsSUFBQUMsRUFBQSxJQUFBQyxLQUNBQyxFQUFBLElBQUFELEtBQ0FFLEVBQUEsSUFBQUYsS0FDQUMsRUFBQUUsUUFBQUYsRUFBQUcsVUFBQSxHQUNBRixFQUFBQyxRQUFBRCxFQUFBRSxVQUFBLEdBR0FDLEVBQUEsR0FBQUMsT0FBQVIsRUFBQSxxQkFBQVMsV0FBQSxDQUNBQyxRQUFBVCxFQUNBVSxnQkFBQSxFQUNBQyxXQUFBLFFBQ0FDLFNBQUEsZ0JBQ0FDLFNBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FDQSxHQUFBLEtBQUFELEVBQ0FDLEVBQUFDLElBQUFDLElBQUEscUJBQ0EsQ0FDQSxJQUFBQyxFQUFBQyxPQUFBTCxHQUFBTSxPQUFBLFdBQ0FMLEVBQUFDLElBQUFLLEtBQUEsUUFBQUgsR0FDQUgsRUFBQUMsSUFBQUMsSUFBQUMsR0FHQSxJQUFBSSxFQUFBLElBQUF0QixLQUFBYyxHQUNBUSxFQUFBbkIsUUFBQW1CLEVBQUFsQixVQUFBLEdBR0EsSUFBQUcsRUFBQUYsRUFBQSxHQUFBQyxPQUFBUixFQUFBLHdCQUFBUyxhQUFBZ0IsS0FBQSxjQUVBVCxHQUFBUCxFQUFBVyxNQUNBWCxFQUFBaUIsT0FBQSxVQUFBRixHQUNBZixFQUFBa0IsV0FBQUgsR0FDQWpCLEVBQUEsR0FBQUMsT0FBQVIsRUFBQSx3QkFBQW1CLElBQUFFLE9BQUFHLEdBQUFGLE9BQUEsWUFDQWYsRUFBQSxHQUFBQyxPQUFBUixFQUFBLHdCQUFBdUIsS0FBQSxRQUFBRixPQUFBRyxHQUFBRixPQUFBLGNBRUFiLEVBQUFpQixPQUFBLFVBQUFGLEdBQ0FqQixFQUFBLEdBQUFDLE9BQUFSLEVBQUEsd0JBQUFtQixJQUFBRSxPQUFBWixFQUFBVyxNQUFBRSxPQUFBLFlBQ0FmLEVBQUEsR0FBQUMsT0FBQVIsRUFBQSx3QkFBQXVCLEtBQUEsUUFBQUYsT0FBQVosRUFBQVcsTUFBQUUsT0FBQSxnQkFLQWYsRUFBQSxHQUFBQyxPQUFBUixFQUFBLHdCQUFBUyxXQUFBLENBQ0FDLFFBQUFOLEVBQ0FPLGdCQUFBLEVBQ0FDLFdBQUEsUUFDQUMsU0FBQSxnQkFDQUMsU0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUNBLEdBQUEsS0FBQUQsRUFDQUMsRUFBQUMsSUFBQUMsSUFBQSxxQkFDQSxDQUNBLElBQUFDLEVBQUFDLE9BQUFMLEdBQUFNLE9BQUEsV0FDQUwsRUFBQUMsSUFBQUssS0FBQSxRQUFBSCxHQUNBSCxFQUFBQyxJQUFBQyxJQUFBQyxPQVFBLElBQUFRLEVBQUFQLFNBRUFPLEVBQUFDLE9BQUEsTUFDQXRCLEVBQUEsR0FBQUMsT0FBQVIsRUFBQSxxQkFBQXVCLEtBQUEsUUFBQUYsT0FBQU8sR0FBQUUsSUFBQSxFQUFBLFFBQUFSLE9BQUEsWUFDQWYsRUFBQSxHQUFBQyxPQUFBUixFQUFBLHdCQUFBdUIsS0FBQSxRQUFBRixPQUFBTyxHQUFBRSxJQUFBLEVBQUEsUUFBQVIsT0FBQSxZQUdBZixFQUFBLEdBQUFDLE9BQUFSLEVBQUEscUJBQUFTLGFBQUFnQixLQUFBLGNBQ0FFLFdBQUF4QixHQUVBSSxFQUFBLEdBQUFDLE9BQUFSLEVBQUEsd0JBQUFTLGFBQUFnQixLQUFBLGNBQ0FFLFdBQUF2QixHQUlBLElBQUEyQixHQUFBLEVBRUF4QixFQUFBLEdBQUFDLE9BQUFSLEVBQUEsWUFBQWdDLE1BQUEsU0FBQUMsR0FDQUYsSUFDQXhCLEVBQUEsR0FBQUMsT0FBQVIsRUFBQSwyQkFBQWtDLFdBQUEsS0FDQUgsR0FBQSxLQUtBeEIsRUFBQTRCLFVBQUFDLFFBQUEsU0FBQUgsR0FDQSxJQUFBSSxFQUFBOUIsRUFBQSxHQUFBQyxPQUFBUixFQUFBLDJCQUNBLElBQUFxQyxFQUFBQyxJQUFBTCxFQUFBTSxRQUFBQyxRQUNBVCxJQUNBTSxFQUFBSSxVQUNBQyxXQUFBLFdBQ0FYLEdBQUEsR0FDQSxRQU1BLElBQUFZLEVBQUFwQyxFQUFBLEdBQUFDLE9BQUFSLEVBQUEsZ0JBQ0E0QyxFQUFBckMsRUFBQSxHQUFBQyxPQUFBUixFQUFBLGlCQUNBNkMsRUFBQXRDLEVBQUEsR0FBQUMsT0FBQVIsRUFBQSxrQkFFQTRDLEVBQUFaLE1BQUEsU0FBQUMsR0FDQSxJQUFBYSxFQUFBSCxFQUFBSSxPQUNBRCxFQUFBLElBQ0FBLElBQ0FILEVBQUFJLEtBQUFELElBR0FFLE1BR0FILEVBQUFiLE1BQUEsU0FBQUMsR0FDQSxJQUFBYSxFQUFBSCxFQUFBSSxPQUNBLEVBQUFELElBQ0FBLElBQ0FILEVBQUFJLEtBQUFELElBR0FFLE1BSUEsSUFBQUMsRUFBQTFDLEVBQUEsR0FBQUMsT0FBQVIsRUFBQSxnQkFDQWtELEVBQUEzQyxFQUFBLEdBQUFDLE9BQUFSLEVBQUEsaUJBQ0FtRCxFQUFBNUMsRUFBQSxHQUFBQyxPQUFBUixFQUFBLGtCQXNCQSxTQUFBZ0QsSUFDQSxJQUFBSSxFQUFBQyxTQUFBVixFQUFBSSxRQUFBTSxTQUFBSixFQUFBRixRQUNBTyxFQUFBL0QsUUFBQTZELEVBQUEsUUFBQSxTQUFBLFVBMkJBLE9BMUJBN0MsRUFBQSxHQUFBQyxPQUFBUixFQUFBLGVBQUErQyxLQUFBTyxHQUVBLElBQUFELFNBQUFWLEVBQUFJLFFBQ0FGLEVBQUF0QixLQUFBLFlBQUEsR0FFQXNCLEVBQUF0QixLQUFBLFlBQUEsR0FHQSxJQUFBOEIsU0FBQVYsRUFBQUksUUFDQUgsRUFBQXJCLEtBQUEsWUFBQSxHQUVBcUIsRUFBQXJCLEtBQUEsWUFBQSxHQUdBLElBQUE4QixTQUFBSixFQUFBRixRQUNBSSxFQUFBNUIsS0FBQSxZQUFBLEdBRUE0QixFQUFBNUIsS0FBQSxZQUFBLEdBR0EsSUFBQThCLFNBQUFKLEVBQUFGLFFBQ0FHLEVBQUEzQixLQUFBLFlBQUEsR0FFQTJCLEVBQUEzQixLQUFBLFlBQUEsR0FHQTZCLEVBakRBRixFQUFBbEIsTUFBQSxTQUFBQyxHQUNBLElBQUFhLEVBQUFHLEVBQUFGLE9BQ0FELEVBQUEsSUFDQUEsSUFDQUcsRUFBQUYsS0FBQUQsSUFHQUUsTUFHQUcsRUFBQW5CLE1BQUEsU0FBQUMsR0FDQSxJQUFBYSxFQUFBRyxFQUFBRixPQUNBLEVBQUFELElBQ0FBLElBQ0FHLEVBQUFGLEtBQUFELElBR0FFLE1Bb0NBekMsRUFBQSxHQUFBQyxPQUFBUixFQUFBLFlBQUFnQyxNQUFBLFNBQUFDLEdBQ0ExQixFQUFBLEdBQUFDLE9BQUFSLEVBQUEscUJBQUF5QixLQUFBLGNBQUE4QixTQUdBaEQsRUFBQSxHQUFBQyxPQUFBUixFQUFBLGVBQUFnQyxNQUFBLFNBQUFDLEdBQ0ExQixFQUFBLEdBQUFDLE9BQUFSLEVBQUEsd0JBQUF5QixLQUFBLGNBQUE4QixTQUtBaEQsRUFBQSxHQUFBQyxPQUFBUixFQUFBLG1CQUFBZ0MsTUFBQSxTQUFBQyxHQUNBLElBQUF1QixFQUFBakQsRUFBQSxHQUFBQyxPQUFBUixFQUFBLHFCQUFBeUIsS0FBQSxjQUFBZ0MsY0FDQUMsRUFBQW5ELEVBQUEsR0FBQUMsT0FBQVIsRUFBQSx3QkFBQXlCLEtBQUEsY0FBQWdDLGNBQ0FFLEVBQUFYLElBRUFZLEVBQUF2QyxPQUFBbUMsRUFBQSxJQUFBbEMsT0FBQSxjQUNBdUMsRUFBQXhDLE9BQUFxQyxFQUFBLElBQUFwQyxPQUFBLGNBQ0F3QyxFQUFBLHlFQUFBdEQsT0FBQW9ELEVBQUEsS0FBQXBELE9BQUFxRCxFQUFBLFlBQUFyRCxPQUFBbUQsR0FHQUksT0FBQUMsS0FBQUYsRUFBQSxZQWpPQS9ELFNBQUFWLGtCQUNBVSxTQUFBVCxrQkNMQSxJQUFBMkUsS0FBQSxJQUFBQyxVQUFBLENBQ0FDLElBQUEsT0FDQUMsT0FBQSxZQUNBQyxZQUFBLHVEQUNBOUIsT0FBQSxZQUNBK0IsV0FBQSxZQUNBQyxNQUFBLEdBQ0FDLFNBQUEscUNBR0FQLEtBQUFRLE1DVkEsSUFBQUMsYUFBQSxJQUNBQyxjQUFBLEtBRUFaLE9BQUFhLE9BQUEsV0FDQXJFLEVBQUF3RCxRQUFBYyxVQUFBLElBSUF0RSxFQUFBLFNBQUF1RSxNQUFBLENBQ0FDLFNBQUEsZ0JBR0F4RSxFQUFBLHVCQUFBdUUsTUFBQSxDQUNBRSxhQUFBLEVBQ0FDLGVBQUEsRUFDQUMsUUFBQSxFQUNBQyxNQUFBLEVBQ0FDLGFBQUEsRUFDQUMsV0FBQSxDQUNBLENBQ0FDLFdBQUFaLGFBQ0FhLFNBQUEsY0FLQWhGLEVBQUEsc0JBQUF1RSxNQUFBLENBQ0FFLGFBQUEsRUFDQUMsZUFBQSxFQUNBQyxRQUFBLEVBQ0FDLE1BQUEsRUFDQUMsYUFBQSxFQUNBQyxXQUFBLENBQ0EsQ0FDQUMsV0FBQVosYUFDQWEsU0FBQSxjQUtBaEYsRUFBQSxxQkFBQXVFLE1BQUEsQ0FDQUUsYUFBQSxFQUNBQyxlQUFBLEVBQ0FDLFFBQUEsRUFDQUMsTUFBQSxFQUNBQyxhQUFBLEVBQ0FDLFdBQUEsQ0FDQSxDQUNBQyxXQUFBWixhQUNBYSxTQUFBLGNBS0FoRixFQUFBLGlCQUFBdUUsTUFBQSxDQUNBRSxhQUFBLEVBQ0FDLGVBQUEsRUFDQUMsUUFBQSxFQUNBQyxNQUFBLEVBQ0FDLGFBQUEsRUFDQUMsV0FBQSxDQUNBLENBQ0FDLFdBQUFaLGFBQ0FhLFNBQUEsY0FLQWhGLEVBQUEsd0JBQUF1RSxNQUFBLENBQ0FFLGFBQUEsRUFDQUMsZUFBQSxFQUNBTyxZQUFBLEVBQ0FMLE1BQUEsRUFDQUQsUUFBQSxFQUNBTyxTQUFBLHVCQUNBTCxhQUFBLEVBQ0FDLFdBQUEsQ0FDQSxDQUFBQyxXQUFBWixhQUNBYSxTQUFBLENBQ0FQLGFBQUEsRUFDQVEsWUFBQSxFQUNBRSxlQUFBLElBR0EsQ0FBQUosV0FBQVgsY0FDQVksU0FBQSxDQUNBUCxhQUFBLEVBQ0FRLFlBQUEsRUFDQUUsZUFBQSxFQUNBUixRQUFBLEVBQ0FTLFVBQUFwRixFQUFBLHlCQUNBcUYsVUFBQXJGLEVBQUEsOEJBTUFBLEVBQUEsd0JBQUF1RSxNQUFBLENBQ0FFLGFBQUEsRUFDQUMsZUFBQSxFQUNBRSxNQUFBLEVBQ0FELFFBQUEsRUFDQU8sU0FBQSx1QkFDQUksZUFBQSxFQUNBSCxlQUFBLEVBQ0FOLGFBQUEsRUFDQUMsV0FBQSxDQUNBLENBQUFDLFdBQUFaLGFBQ0FhLFNBQUEsQ0FDQVAsYUFBQSxFQUNBRyxNQUFBLE9BTUE1RSxFQUFBLHdCQUFBdUUsTUFBQSxZQUFBLEdBQ0F2RSxFQUFBLFlBQUFnRCxPQTJCQSxJQXhCQSxJQUFBdUMsbUJBQUEsU0FBQUMsRUFBQUMsR0FxQkEsTUFwQkEsQ0FDQVosYUFBQSxFQUNBYSxVQUFBLEVBQ0FqQixhQUFBLEVBQ0FDLGVBQUEsRUFDQU8sWUFBQSxFQUNBRSxlQUFBLEVBQ0FQLE1BQUEsRUFDQVEsVUFBQXBGLEVBQUF3RixHQUNBSCxVQUFBckYsRUFBQXlGLEdBQ0FYLFdBQUEsQ0FDQSxDQUFBQyxXQUFBWCxjQUNBWSxTQUFBLENBQ0FHLGVBQUEsRUFDQUYsWUFBQSxFQUNBUixhQUFBLE9BUUFrQixFQUFBLEVBQUFBLEdBQUEsRUFBQUEsSUFBQSxDQUNBLElBQUFDLFdBQUEsb0JBQUEzRixPQUFBMEYsR0FDQUUsV0FBQU4sbUJBQUEsdUJBQUF0RixPQUFBMEYsR0FBQSx1QkFBQTFGLE9BQUEwRixJQUNBM0YsRUFBQTRGLFlBQUFyQixNQUFBc0IsWUFDQTdGLEVBQUE0RixZQUFBRSxLQUFBLHNCQUFBQyxPQUNBL0YsRUFBQTRGLFlBQUFFLEtBQUEscUNBQUE5QyxPQUNBaEQsRUFBQTRGLFlBQUFJLEdBQUEsZUFBQUMscUJBR0FqRyxFQUFBLG9DQUFBOEYsS0FBQSwwQ0FBQUksU0FBQSxnQ0FFQSxJQUFBQyxjQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBQ0F0RyxFQUFBLGdDQUFBc0csRUFBQSxNQUFBUixLQUFBLHNDQUFBTSxFQUFBLE1BQUFHLFlBQUEsZ0NBQ0F2RyxFQUFBLGdDQUFBc0csRUFBQSxNQUFBUixLQUFBLHNDQUFBTyxFQUFBLE1BQUFILFNBQUEsaUNBSUEsU0FBQUQsb0JBQUFPLEVBQUFqQyxFQUFBa0MsRUFBQUMsR0FDQSxJQUFBSixFQUFBL0IsRUFBQW9DLFFBQUF6RixPQUFBcUIsSUFDQXFFLEVBQUE1RyxFQUFBLDZCQUFBc0csRUFBQSxNQUNBTSxFQUFBZCxLQUFBLDhCQUFBVyxFQUFBLE1BQUFWLE9BQ0FhLEVBQUFkLEtBQUEsOEJBQUFZLEVBQUEsTUFBQTFELE9BQ0E0RCxFQUFBZCxLQUFBLGlDQUFBVyxFQUFBLE1BQUFWLE9BQ0FhLEVBQUFkLEtBQUEsaUNBQUFZLEVBQUEsTUFBQTFELE9BQ0FtRCxjQUFBTSxFQUFBQyxFQUFBSixHQUdBdEcsRUFBQSxzQkFBQXlCLE1BQUEsU0FBQW9GLEdBQ0EsSUFBQTdHLEVBQUE4RyxNQUFBQyxTQUFBLDZCQUFBLENBR0EsSUFBQUMsRUFBQWhILEVBQUE4RyxNQUFBNUYsT0FBQXFCLElBQ0FxRSxFQUFBNUcsRUFBQSw2QkFBQWdILEVBQUEsTUFDQUMsRUFBQWpILEVBQUEsK0JBQUFnSCxFQUFBLE1BRUFoSCxFQUFBLFdBQUE4RixLQUFBLDJCQUFBb0IsSUFBQSxlQUFBakIscUJBQ0FXLEVBQUFaLEdBQUEsZUFBQUMscUJBRUFqRyxFQUFBLFdBQUE4RixLQUFBLDJCQUFBUyxZQUFBLDBCQUNBdkcsRUFBQSxXQUFBOEYsS0FBQSw4QkFBQVMsWUFBQSw2QkFDQXZHLEVBQUEsV0FBQThGLEtBQUEsaUNBQUFTLFlBQUEsZ0NBQ0F2RyxFQUFBLFdBQUE4RixLQUFBLDZCQUFBUyxZQUFBLDRCQUVBdkcsRUFBQThHLE1BQUFaLFNBQUEsNkJBQ0FVLEVBQUFWLFNBQUEsMEJBQ0FlLEVBQUFmLFNBQUEsNEJBQ0FsRyxFQUFBLFdBQUE4RixLQUFBLDJCQUFBdkIsTUFBQSxZQUFBLEdBRUF2RSxFQUFBLGdDQUFBZ0gsRUFBQSxNQUFBbEIsS0FBQSwwQ0FBQUksU0FBQSxnQ0FDQVUsRUFBQXJDLE1BQUEsY0FJQXZFLEVBQUEseUJBQUF5QixNQUFBLFNBQUFvRixHQUNBLElBQUE3RyxFQUFBOEcsTUFBQUMsU0FBQSxnQ0FBQSxDQUdBLElBQUFJLEVBQUFuSCxFQUFBOEcsTUFBQTVGLE9BQUFrRyxPQUVBcEgsRUFBQSxXQUFBOEYsS0FBQSwyQkFBQXZCLE1BQUEsWUFBQTRDLEdBRUFuSCxFQUFBLFdBQUE4RixLQUFBLGlDQUFBUyxZQUFBLGdDQUNBdkcsRUFBQThHLE1BQUFaLFNBQUEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiAgLy8g0KTQvtGA0LzQuNGA0YPQtdC8INGE0L7RgNC80Ysg0LfQsNC60LDQt9GLXG4gIGNvbnN0IGhlYWRlckZvcm1TZWxlY3QgPSAnLmhlYWRlcl9fc2VhcmNoJztcbiAgY29uc3QgZm9vdGVyRm9ybVNlbGVjdCA9ICcuZm9vdGVyX19zZWFyY2gnO1xuXG4gIG1ha2VGb3JtKGhlYWRlckZvcm1TZWxlY3QpO1xuICBtYWtlRm9ybShmb290ZXJGb3JtU2VsZWN0KTtcblxuLy8g0KHQutC70L7QvdC10L3QuNC1XG5mdW5jdGlvbiBnZXROb3VuKG51bWJlciwgb25lLCB0d28sIGZpdmUpIHtcbiAgY29uc3QgaW5pdE51bWJlciA9IG51bWJlclxuICBudW1iZXIgPSBNYXRoLmFicyhudW1iZXIpXG4gIG51bWJlciAlPSAxMDBcbiAgaWYgKG51bWJlciA+PSA1ICYmIG51bWJlciA8PSAyMCkge1xuICAgIHJldHVybiBpbml0TnVtYmVyICsgJyAnICsgZml2ZVxuICB9XG4gIG51bWJlciAlPSAxMFxuICBpZiAobnVtYmVyID09PSAxKSB7XG4gICAgcmV0dXJuIGluaXROdW1iZXIgKyAnICcgKyBvbmVcbiAgfVxuICBpZiAobnVtYmVyID49IDIgJiYgbnVtYmVyIDw9IDQpIHtcbiAgICByZXR1cm4gaW5pdE51bWJlciArICcgJyArIHR3b1xuICB9XG4gIHJldHVybiBpbml0TnVtYmVyICsgJyAnICsgZml2ZVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG4gIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg0KTQvtGA0LzQsCDQv9C+0LjRgdC60LAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG5cbiAgZnVuY3Rpb24gbWFrZUZvcm0oc2VsZWN0aW9uKSB7XG4gICAgY29uc3QgY3VyRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgY2hlY2tEYXkgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IGV2aWN0RGF5ID0gbmV3IERhdGUoKTtcbiAgICBjaGVja0RheS5zZXREYXRlKGNoZWNrRGF5LmdldERhdGUoKSArIDEpO1xuICAgIGV2aWN0RGF5LnNldERhdGUoZXZpY3REYXkuZ2V0RGF0ZSgpICsgMik7XG5cbiAgICAvLyAqKioqKioqKioqKioqKiogKirQodC40L3RhdGA0L7QvdC40LfQsNGG0LjRjyDQutCw0LvQtdC90LTQsNGA0LXQuSAqKioqKioqKioqKioqKioqKioqKioqKiogLy9cbiAgICAkKGAke3NlbGVjdGlvbn0gLmNoZWNrLWNhbGVuZGFyYCkuZGF0ZXBpY2tlcih7XG4gICAgICBtaW5EYXRlOiBjdXJEYXRlLFxuICAgICAgdG9nZ2xlU2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgZGF0ZUZvcm1hdDogJ2QsIE1NJyxcbiAgICAgIHBvc2l0aW9uOiBcImJvdHRvbSBjZW50ZXJcIixcbiAgICAgIG9uU2VsZWN0OiBmdW5jdGlvbiAoZmQsIGQsIHBpY2tlcnMpIHtcbiAgICAgICAgaWYgKGQgPT09ICcnKSB7XG4gICAgICAgICAgcGlja2Vycy4kZWwudmFsKCfQktGL0LHQtdGA0LjRgtC1INC00LDRgtGDJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgZGF0ZSA9IG1vbWVudChkKS5mb3JtYXQoJ0REIE1NTU0nKTtcbiAgICAgICAgICBwaWNrZXJzLiRlbC5hdHRyKCd2YWx1ZScsIGRhdGUpO1xuICAgICAgICAgIHBpY2tlcnMuJGVsLnZhbChkYXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVwZE1pbiA9IG5ldyBEYXRlKGQpO1xuICAgICAgICB1cGRNaW4uc2V0RGF0ZSh1cGRNaW4uZ2V0RGF0ZSgpICsgMSk7XG5cbiAgICAgICAgLy8g0JzQtdC90Y/QtdC8INC80LjQvSDQt9C90LDRh9C10L3QuNC1INCyINC60LDQu9C10L3QtNCw0YDQtSDQstGL0YHQtdC70LXQvdC40Y9cbiAgICAgICAgY29uc3QgZGF0ZXBpY2tlciA9ICQoYCR7c2VsZWN0aW9ufSAuZXZpY3Rpb24tY2FsZW5kYXJgKS5kYXRlcGlja2VyKCkuZGF0YSgnZGF0ZXBpY2tlcicpO1xuXG4gICAgICAgIGlmIChkID49IGRhdGVwaWNrZXIuZGF0ZSkge1xuICAgICAgICAgIGRhdGVwaWNrZXIudXBkYXRlKCdtaW5EYXRlJywgdXBkTWluKTtcbiAgICAgICAgICBkYXRlcGlja2VyLnNlbGVjdERhdGUodXBkTWluKTtcbiAgICAgICAgICAkKGAke3NlbGVjdGlvbn0gLmV2aWN0aW9uLWNhbGVuZGFyYCkudmFsKG1vbWVudCh1cGRNaW4pLmZvcm1hdCgnREQgTU1NTScpKVxuICAgICAgICAgICQoYCR7c2VsZWN0aW9ufSAuZXZpY3Rpb24tY2FsZW5kYXJgKS5hdHRyKCd2YWx1ZScsIG1vbWVudCh1cGRNaW4pLmZvcm1hdCgnREQgTU1NTScpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGVwaWNrZXIudXBkYXRlKCdtaW5EYXRlJywgdXBkTWluKTtcbiAgICAgICAgICAkKGAke3NlbGVjdGlvbn0gLmV2aWN0aW9uLWNhbGVuZGFyYCkudmFsKG1vbWVudChkYXRlcGlja2VyLmRhdGUpLmZvcm1hdCgnREQgTU1NTScpKVxuICAgICAgICAgICQoYCR7c2VsZWN0aW9ufSAuZXZpY3Rpb24tY2FsZW5kYXJgKS5hdHRyKCd2YWx1ZScsIG1vbWVudChkYXRlcGlja2VyLmRhdGUpLmZvcm1hdCgnREQgTU1NTScpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAkKGAke3NlbGVjdGlvbn0gLmV2aWN0aW9uLWNhbGVuZGFyYCkuZGF0ZXBpY2tlcih7XG4gICAgICBtaW5EYXRlOiBldmljdERheSxcbiAgICAgIHRvZ2dsZVNlbGVjdGVkOiBmYWxzZSxcbiAgICAgIGRhdGVGb3JtYXQ6ICdkLCBNTScsXG4gICAgICBwb3NpdGlvbjogXCJib3R0b20gY2VudGVyXCIsXG4gICAgICBvblNlbGVjdDogZnVuY3Rpb24gKGZkLCBkLCBwaWNrZXJzKSB7XG4gICAgICAgIGlmIChkID09PSAnJykge1xuICAgICAgICAgIHBpY2tlcnMuJGVsLnZhbCgn0JLRi9Cx0LXRgNC40YLQtSDQtNCw0YLRgycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGRhdGUgPSBtb21lbnQoZCkuZm9ybWF0KCdERCBNTU1NJyk7XG4gICAgICAgICAgcGlja2Vycy4kZWwuYXR0cigndmFsdWUnLCBkYXRlKTtcbiAgICAgICAgICBwaWNrZXJzLiRlbC52YWwoZGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIC8vXG5cbiAgICAvLyDQl9C90LDRh9C10L3QuNGPINC/0L4t0YPQvNC+0LvRh9Cw0L3QuNGOXG4gICAgY29uc3QgZGVmRGF5ID0gbW9tZW50KCk7XG5cbiAgICBkZWZEYXkubG9jYWxlKCdydScpXG4gICAgJChgJHtzZWxlY3Rpb259IC5jaGVjay1jYWxlbmRhcmApLmF0dHIoJ3ZhbHVlJywgbW9tZW50KGRlZkRheSkuYWRkKDEsICdkYXlzJykuZm9ybWF0KCdERCBNTU1NJykpO1xuICAgICQoYCR7c2VsZWN0aW9ufSAuZXZpY3Rpb24tY2FsZW5kYXJgKS5hdHRyKCd2YWx1ZScsIG1vbWVudChkZWZEYXkpLmFkZCgyLCAnZGF5cycpLmZvcm1hdCgnREQgTU1NTScpKTtcblxuXG4gICAgY29uc3QgY2hlY2tDYWxlbmRhciA9ICQoYCR7c2VsZWN0aW9ufSAuY2hlY2stY2FsZW5kYXJgKS5kYXRlcGlja2VyKCkuZGF0YSgnZGF0ZXBpY2tlcicpO1xuICAgIGNoZWNrQ2FsZW5kYXIuc2VsZWN0RGF0ZShjaGVja0RheSk7XG5cbiAgICBjb25zdCBldmljdGlvbkNhbGVuZGFyID0gJChgJHtzZWxlY3Rpb259IC5ldmljdGlvbi1jYWxlbmRhcmApLmRhdGVwaWNrZXIoKS5kYXRhKCdkYXRlcGlja2VyJyk7XG4gICAgZXZpY3Rpb25DYWxlbmRhci5zZWxlY3REYXRlKGV2aWN0RGF5KTtcblxuICAgIC8vICoqKioqKioqKioqKiDQmtC+0LvQuNGH0LXRgdGC0LLQviDQs9C+0YHRgtC10LkgKioqKioqKioqKioqKioqKiAvL1xuICAgIC8vINCS0YvQv9Cw0LTQsNGO0YnQtdC1INC80LXQvdGOXG4gICAgbGV0IG9wZW5lZCA9IGZhbHNlO1xuXG4gICAgJChgJHtzZWxlY3Rpb259IC5ndWVzdGApLmNsaWNrKChlKSA9PiB7XG4gICAgICBpZiAoIW9wZW5lZCkge1xuICAgICAgICAkKGAke3NlbGVjdGlvbn0gLnNlYXJjaF9fZ3Vlc3QtY2hhbmdlYCkuZmFkZVRvZ2dsZSgyMDApO1xuICAgICAgICBvcGVuZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyDQodC60YDRi9GC0LjQtSDQv9GA0Lgg0LrQu9C40LrQtSDQstC90LUg0L7QutC90LBcbiAgICAkKGRvY3VtZW50KS5tb3VzZXVwKGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgY29udGFpbmVyID0gJChgJHtzZWxlY3Rpb259IC5zZWFyY2hfX2d1ZXN0LWNoYW5nZWApO1xuICAgICAgaWYgKGNvbnRhaW5lci5oYXMoZS50YXJnZXQpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBpZiAob3BlbmVkKSB7XG4gICAgICAgICAgY29udGFpbmVyLmZhZGVPdXQoKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIG9wZW5lZCA9IGZhbHNlO1xuICAgICAgICAgIH0sIDIwMClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8g0JLQt9GA0L7RgdC70YvQtVxuICAgIGNvbnN0IGFkdWx0U3VtID0gJChgJHtzZWxlY3Rpb259IC5hZHVsdC1zdW1gKTtcbiAgICBjb25zdCBhZHVsdFBsdXMgPSAkKGAke3NlbGVjdGlvbn0gLmFkdWx0LXBsdXNgKTtcbiAgICBjb25zdCBhZHVsdE1pbnVzID0gJChgJHtzZWxlY3Rpb259IC5hZHVsdC1taW51c2ApO1xuXG4gICAgYWR1bHRQbHVzLmNsaWNrKChlKSA9PiB7XG4gICAgICBsZXQgbnVtID0gYWR1bHRTdW0udGV4dCgpXG4gICAgICBpZiAobnVtIDwgNikge1xuICAgICAgICBudW0rKztcbiAgICAgICAgYWR1bHRTdW0udGV4dChudW0pXG4gICAgICB9XG5cbiAgICAgIGNhbGNTdW1PZkd1ZXN0cygpO1xuICAgIH0pO1xuXG4gICAgYWR1bHRNaW51cy5jbGljaygoZSkgPT4ge1xuICAgICAgbGV0IG51bSA9IGFkdWx0U3VtLnRleHQoKVxuICAgICAgaWYgKG51bSA+IDEpIHtcbiAgICAgICAgbnVtLS07XG4gICAgICAgIGFkdWx0U3VtLnRleHQobnVtKVxuICAgICAgfVxuXG4gICAgICBjYWxjU3VtT2ZHdWVzdHMoKTtcbiAgICB9KTtcblxuICAgIC8vINCU0LXRgtC4XG4gICAgY29uc3QgY2hpbGRTdW0gPSAkKGAke3NlbGVjdGlvbn0gLmNoaWxkLXN1bWApO1xuICAgIGNvbnN0IGNoaWxkUGx1cyA9ICQoYCR7c2VsZWN0aW9ufSAuY2hpbGQtcGx1c2ApO1xuICAgIGNvbnN0IGNoaWxkTWludXMgPSAkKGAke3NlbGVjdGlvbn0gLmNoaWxkLW1pbnVzYCk7XG5cbiAgICBjaGlsZFBsdXMuY2xpY2soKGUpID0+IHtcbiAgICAgIGxldCBudW0gPSBjaGlsZFN1bS50ZXh0KClcbiAgICAgIGlmIChudW0gPCA1KSB7XG4gICAgICAgIG51bSsrO1xuICAgICAgICBjaGlsZFN1bS50ZXh0KG51bSlcbiAgICAgIH1cblxuICAgICAgY2FsY1N1bU9mR3Vlc3RzKCk7XG4gICAgfSk7XG5cbiAgICBjaGlsZE1pbnVzLmNsaWNrKChlKSA9PiB7XG4gICAgICBsZXQgbnVtID0gY2hpbGRTdW0udGV4dCgpXG4gICAgICBpZiAobnVtID4gMCkge1xuICAgICAgICBudW0tLTtcbiAgICAgICAgY2hpbGRTdW0udGV4dChudW0pXG4gICAgICB9XG5cbiAgICAgIGNhbGNTdW1PZkd1ZXN0cygpO1xuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gY2FsY1N1bU9mR3Vlc3RzKCkge1xuICAgICAgY29uc3QgZnVsbFN1bSA9IHBhcnNlSW50KGFkdWx0U3VtLnRleHQoKSkgKyBwYXJzZUludChjaGlsZFN1bS50ZXh0KCkpO1xuICAgICAgY29uc3QgY29uY2F0U3RyaW5nID0gZ2V0Tm91bihmdWxsU3VtLCAn0LPQvtGB0YLRjycsICfQs9C+0YHRgtC10LknLCAn0LPQvtGB0YLQtdC5Jyk7XG4gICAgICAkKGAke3NlbGVjdGlvbn0gLmZ1bGwtc3VtYCkudGV4dChjb25jYXRTdHJpbmcpO1xuXG4gICAgICBpZiAocGFyc2VJbnQoYWR1bHRTdW0udGV4dCgpKSA9PT0gMSkge1xuICAgICAgICBhZHVsdE1pbnVzLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhZHVsdE1pbnVzLmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyc2VJbnQoYWR1bHRTdW0udGV4dCgpKSA9PT0gNikge1xuICAgICAgICBhZHVsdFBsdXMuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFkdWx0UGx1cy5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcnNlSW50KGNoaWxkU3VtLnRleHQoKSkgPT09IDApIHtcbiAgICAgICAgY2hpbGRNaW51cy5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hpbGRNaW51cy5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcnNlSW50KGNoaWxkU3VtLnRleHQoKSkgPT09IDUpIHtcbiAgICAgICAgY2hpbGRQbHVzLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGlsZFBsdXMuYXR0cignZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmdWxsU3VtXG4gICAgfVxuXG5cbiAgICAkKGAke3NlbGVjdGlvbn0gLmNoZWNrYCkuY2xpY2soKGUpID0+IHtcbiAgICAgICQoYCR7c2VsZWN0aW9ufSAuY2hlY2stY2FsZW5kYXJgKS5kYXRhKCdkYXRlcGlja2VyJykuc2hvdygpO1xuICAgIH0pXG5cbiAgICAkKGAke3NlbGVjdGlvbn0gLmV2aWN0aW9uYCkuY2xpY2soKGUpID0+IHtcbiAgICAgICQoYCR7c2VsZWN0aW9ufSAuZXZpY3Rpb24tY2FsZW5kYXJgKS5kYXRhKCdkYXRlcGlja2VyJykuc2hvdygpO1xuICAgIH0pXG5cbiAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIC8vXG5cbiAgICAkKGAke3NlbGVjdGlvbn0gLnNlYXJjaF9fZ290b2ApLmNsaWNrKChlKSA9PiB7XG4gICAgICBjb25zdCBjaGVja0RhdGEgPSAkKGAke3NlbGVjdGlvbn0gLmNoZWNrLWNhbGVuZGFyYCkuZGF0YSgnZGF0ZXBpY2tlcicpLnNlbGVjdGVkRGF0ZXM7XG4gICAgICBjb25zdCBldmljdERhdGEgPSAkKGAke3NlbGVjdGlvbn0gLmV2aWN0aW9uLWNhbGVuZGFyYCkuZGF0YSgnZGF0ZXBpY2tlcicpLnNlbGVjdGVkRGF0ZXM7XG4gICAgICBjb25zdCBndWVzdHMgPSBjYWxjU3VtT2ZHdWVzdHMoKTtcblxuICAgICAgY29uc3QgZm9ybWF0ZWRDaGVjayA9IG1vbWVudChjaGVja0RhdGFbMF0pLmZvcm1hdCgnREQuTU0uWVlZWScpO1xuICAgICAgY29uc3QgZm9ybWF0ZWRFdmljdCA9IG1vbWVudChldmljdERhdGFbMF0pLmZvcm1hdCgnREQuTU0uWVlZWScpO1xuICAgICAgY29uc3QgY29tcGFyZVN0cmluZyA9IGBodHRwczovL29zdHJvdm9rLnJ1L2hvdGVsL3VuaXRlZF9hcmFiX2VtaXJhdGVzL2FidV9kaGFiaS8/cT00NTMmZGF0ZXM9JHtmb3JtYXRlZENoZWNrfS0ke2Zvcm1hdGVkRXZpY3R9Jmd1ZXN0cz0ke2d1ZXN0c31gXG5cbiAgICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gY29tcGFyZVN0cmluZztcbiAgICAgIHdpbmRvdy5vcGVuKGNvbXBhcmVTdHJpbmcsICdfYmxhbmsnKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGZvcm1hdGVkQ2hlY2spXG4gICAgICAvLyBjb25zb2xlLmxvZyhmb3JtYXRlZEV2aWN0KVxuICAgICAgLy8gY29uc29sZS5sb2coZ3Vlc3RzKVxuICAgICAgLy8gY29uc29sZS5sb2coY29tcGFyZVN0cmluZylcbiAgICB9KVxuICB9XG4iLCJjb25zdCBmZWVkID0gbmV3IEluc3RhZmVlZCh7XG4gIGdldDogJ3VzZXInLFxuICB1c2VySWQ6IDE0MTEwNDg2MDcwLFxuICBhY2Nlc3NUb2tlbjogJzE0MTEwNDg2MDcwLjE2NzdlZDAuZTI5ZjM5MGQ1NDI1NDhjYzlkMzgzOTU0ZmYyYjJmM2EnLFxuICB0YXJnZXQ6ICdJbnN0YWZlZWQnLFxuICByZXNvbHV0aW9uOiAndGh1bWJuYWlsJyxcbiAgbGltaXQ6IDUwLFxuICB0ZW1wbGF0ZTogJzxsaT48aW1nIHNyYz1cInt7aW1hZ2V9fVwiIC8+PC9saT4nLFxufSk7XG5cbmZlZWQucnVuKCk7XG4iLCJjb25zdCBUQUJMRVRfV0lEVEggPSA3NjggLSAxO1xuY29uc3QgREVTS1RPUF9XSURUSCA9IDExOTAgLSAxO1xuXG4od2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAkKHdpbmRvdykuc2Nyb2xsVG9wKDApO1xufSk7XG5cblxuJCgnLmxhenknKS5zbGljayh7XG4gIGxhenlMb2FkOiAncHJvZ3Jlc3NpdmUnXG59KTtcblxuJCgnLmFkdmFudGFnZXNfX3NsaWRlcicpLnNsaWNrKHtcbiAgc2xpZGVzVG9TaG93OiAxLFxuICBzbGlkZXNUb1Njcm9sbDogMSxcbiAgYXJyb3dzOiBmYWxzZSxcbiAgZG90czogdHJ1ZSxcbiAgbW9iaWxlRmlyc3Q6IHRydWUsXG4gIHJlc3BvbnNpdmU6IFtcbiAgICB7XG4gICAgICBicmVha3BvaW50OiBUQUJMRVRfV0lEVEgsXG4gICAgICBzZXR0aW5nczogJ3Vuc2xpY2snXG4gICAgfVxuICBdXG59KTtcblxuJCgnLnRyYW5zcG9ydF9fc2xpZGVyJykuc2xpY2soe1xuICBzbGlkZXNUb1Nob3c6IDEsXG4gIHNsaWRlc1RvU2Nyb2xsOiAxLFxuICBhcnJvd3M6IGZhbHNlLFxuICBkb3RzOiB0cnVlLFxuICBtb2JpbGVGaXJzdDogdHJ1ZSxcbiAgcmVzcG9uc2l2ZTogW1xuICAgIHtcbiAgICAgIGJyZWFrcG9pbnQ6IFRBQkxFVF9XSURUSCxcbiAgICAgIHNldHRpbmdzOiAndW5zbGljaydcbiAgICB9XG4gIF1cbn0pO1xuXG4kKCcubGlmZWhhY2tfX3NsaWRlcicpLnNsaWNrKHtcbiAgc2xpZGVzVG9TaG93OiAxLFxuICBzbGlkZXNUb1Njcm9sbDogMSxcbiAgYXJyb3dzOiBmYWxzZSxcbiAgZG90czogdHJ1ZSxcbiAgbW9iaWxlRmlyc3Q6IHRydWUsXG4gIHJlc3BvbnNpdmU6IFtcbiAgICB7XG4gICAgICBicmVha3BvaW50OiBUQUJMRVRfV0lEVEgsXG4gICAgICBzZXR0aW5nczogJ3Vuc2xpY2snXG4gICAgfVxuICBdXG59KTtcblxuJCgnLnN0b3BfX3NsaWRlcicpLnNsaWNrKHtcbiAgc2xpZGVzVG9TaG93OiAxLFxuICBzbGlkZXNUb1Njcm9sbDogMSxcbiAgYXJyb3dzOiBmYWxzZSxcbiAgZG90czogdHJ1ZSxcbiAgbW9iaWxlRmlyc3Q6IHRydWUsXG4gIHJlc3BvbnNpdmU6IFtcbiAgICB7XG4gICAgICBicmVha3BvaW50OiBUQUJMRVRfV0lEVEgsXG4gICAgICBzZXR0aW5nczogJ3Vuc2xpY2snXG4gICAgfVxuICBdXG59KTtcblxuJCgnLmRldGFpbHNfX3NsaWRlci1mb3InKS5zbGljayh7XG4gIHNsaWRlc1RvU2hvdzogMSxcbiAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gIGNlbnRlck1vZGU6IGZhbHNlLFxuICBkb3RzOiB0cnVlLFxuICBhcnJvd3M6IGZhbHNlLFxuICBhc05hdkZvcjogJy5kZXRhaWxzX19zbGlkZXItbmF2JyxcbiAgbW9iaWxlRmlyc3Q6IHRydWUsXG4gIHJlc3BvbnNpdmU6IFtcbiAgICB7IGJyZWFrcG9pbnQ6IFRBQkxFVF9XSURUSCxcbiAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICAgICAgY2VudGVyTW9kZTogdHJ1ZSxcbiAgICAgICAgdmFyaWFibGVXaWR0aDogdHJ1ZVxuICAgICAgfVxuICAgIH0sXG4gICAgeyBicmVha3BvaW50OiBERVNLVE9QX1dJRFRILFxuICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICBjZW50ZXJNb2RlOiB0cnVlLFxuICAgICAgICB2YXJpYWJsZVdpZHRoOiB0cnVlLFxuICAgICAgICBhcnJvd3M6IHRydWUsXG4gICAgICAgIHByZXZBcnJvdzogJCgnLmRldGFpbHNfX2Fycm93LS1wcmV2JyksXG4gICAgICAgIG5leHRBcnJvdzogJCgnLmRldGFpbHNfX2Fycm93LS1uZXh0JylcbiAgICAgIH1cbiAgICB9XG4gIF1cbn0pO1xuXG4kKCcuZGV0YWlsc19fc2xpZGVyLW5hdicpLnNsaWNrKHtcbiAgc2xpZGVzVG9TaG93OiA0LFxuICBzbGlkZXNUb1Njcm9sbDogMSxcbiAgZG90czogZmFsc2UsXG4gIGFycm93czogZmFsc2UsXG4gIGFzTmF2Rm9yOiAnLmRldGFpbHNfX3NsaWRlci1mb3InLFxuICBmb2N1c09uU2VsZWN0OiB0cnVlLFxuICB2YXJpYWJsZVdpZHRoOiB0cnVlLFxuICBtb2JpbGVGaXJzdDogdHJ1ZSxcbiAgcmVzcG9uc2l2ZTogW1xuICAgIHsgYnJlYWtwb2ludDogVEFCTEVUX1dJRFRILFxuICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgc2xpZGVzVG9TaG93OiA2LFxuICAgICAgICBkb3RzOiB0cnVlLFxuICAgICAgfVxuICAgIH1cbiAgXVxufSk7XG5cbiQoJy5kZXRhaWxzX19zbGlkZXItZm9yJykuc2xpY2soJ3NsaWNrR29UbycsIDIpO1xuJCgnLmRldGFpbHMnKS5zaG93KCk7XG5cbi8vINCf0LDRgNCw0LzQtdGC0YDRiyDRgdC70LDQudC00LXRgNC+0LIg0LTQvtGB0YLQvtC/0YDQuNC80LXRh9Cw0YLQtdC70YzQvdC+0YHRgtC10LlcbmNvbnN0IHNldFNsaWNrUGFyYW1ldGVycyA9IGZ1bmN0aW9uKGFycm93UHJldiwgYXJyb3dOZXh0KSB7XG4gIGNvbnN0IHNsaWNrUGFyYW1ldGVycyA9IHtcbiAgICBtb2JpbGVGaXJzdDogdHJ1ZSxcbiAgICBpbmZpbml0ZTogdHJ1ZSxcbiAgICBzbGlkZXNUb1Nob3c6IDIsXG4gICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgY2VudGVyTW9kZTogdHJ1ZSxcbiAgICB2YXJpYWJsZVdpZHRoOiB0cnVlLFxuICAgIGRvdHM6IGZhbHNlLFxuICAgIHByZXZBcnJvdzogJChhcnJvd1ByZXYpLFxuICAgIG5leHRBcnJvdzogJChhcnJvd05leHQpLFxuICAgIHJlc3BvbnNpdmU6IFtcbiAgICAgIHsgYnJlYWtwb2ludDogREVTS1RPUF9XSURUSCxcbiAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICB2YXJpYWJsZVdpZHRoOiB0cnVlLFxuICAgICAgICAgIGNlbnRlck1vZGU6IGZhbHNlLFxuICAgICAgICAgIHNsaWRlc1RvU2hvdzogMlxuICAgICAgICB9XG4gICAgICB9XG4gICAgXVxuICB9XG4gIHJldHVybiBzbGlja1BhcmFtZXRlcnM7XG59O1xuXG5mb3IgKGxldCBpID0gMTsgaSA8PSA0OyBpKyspIHtcbiAgY29uc3QgbmFtZVNsaWRlciA9IGAuYmV0dGVyX19zbGlkZXItLSR7aX1gO1xuICBjb25zdCBwYXJhbWV0ZXJzID0gc2V0U2xpY2tQYXJhbWV0ZXJzKGAuYmV0dGVyX19hcnJvdy0tcHJldiR7aX1gLCBgLmJldHRlcl9fYXJyb3ctLW5leHQke2l9YCk7XG4gICQobmFtZVNsaWRlcikuc2xpY2socGFyYW1ldGVycyk7XG4gICQobmFtZVNsaWRlcikuZmluZCgnLmJldHRlcl9fd3JhcC10ZXh0JykuaGlkZSgpO1xuICAkKG5hbWVTbGlkZXIpLmZpbmQoJy5iZXR0ZXJfX3dyYXAtdGV4dFtkYXRhLXRleHQ9XCIwXCJdJykuc2hvdygpO1xuICAkKG5hbWVTbGlkZXIpLm9uKCdiZWZvcmVDaGFuZ2UnLCBiZWZvcmVDaGFuZ2VIYW5kbGVyKTsgLy8g0JTQvtCx0LDQstC70Y/QtdGCINGB0LvRg9GI0LDRgtC10LvRjCDRgdC80LXQvdGLINGB0LvQsNC50LTQsFxufVxuXG4kKCcuYmV0dGVyX19tZW51LWl0ZW1bZGF0YS1udW09XCIxXCJdJykuZmluZCgnLmJldHRlcl9fc3VibWVudS1pdGVtW2RhdGEtc3VibnVtPVwiMFwiXScpLmFkZENsYXNzKCdiZXR0ZXJfX3N1Ym1lbnUtaXRlbS0tYWN0aXZlJyk7XG5cbmNvbnN0IHRvZ2dsZVN1Ym1lbnUgPSBmdW5jdGlvbihudW1DdXJyZW50U2xpZGUsIG51bU5leHRTbGlkZSwgbnVtU2xpZGVyKSB7XG4gICQoJy5iZXR0ZXJfX21lbnUtaXRlbVtkYXRhLW51bT1cIicgKyBudW1TbGlkZXIgKyAnXCJdJykuZmluZCgnLmJldHRlcl9fc3VibWVudS1pdGVtW2RhdGEtc3VibnVtPVwiJyArIG51bUN1cnJlbnRTbGlkZSArICdcIl0nKS5yZW1vdmVDbGFzcygnYmV0dGVyX19zdWJtZW51LWl0ZW0tLWFjdGl2ZScpO1xuICAkKCcuYmV0dGVyX19tZW51LWl0ZW1bZGF0YS1udW09XCInICsgbnVtU2xpZGVyICsgJ1wiXScpLmZpbmQoJy5iZXR0ZXJfX3N1Ym1lbnUtaXRlbVtkYXRhLXN1Ym51bT1cIicgKyBudW1OZXh0U2xpZGUgKyAnXCJdJykuYWRkQ2xhc3MoJ2JldHRlcl9fc3VibWVudS1pdGVtLS1hY3RpdmUnKTtcbn07XG5cbi8vINCh0YDQsNCx0LDRgtGL0LLQsNC10YIg0LTQviDRgdC80LXQvdGLINGB0LvQsNC50LTQsCDQsiDRgdC70LDQudC00LXRgNC1XG5mdW5jdGlvbiBiZWZvcmVDaGFuZ2VIYW5kbGVyKGV2ZW50LCBzbGljaywgY3VycmVudFNsaWRlLCBuZXh0U2xpZGUpIHtcbiAgY29uc3QgbnVtU2xpZGVyID0gc2xpY2suJHNsaWRlci5kYXRhKCkubnVtO1xuICBjb25zdCB0YXJnZXRTbGlkZXIgPSAkKCcuYmV0dGVyX19zbGlkZXJbZGF0YS1udW09XCInICsgbnVtU2xpZGVyICsgJ1wiXScpO1xuICB0YXJnZXRTbGlkZXIuZmluZCgnLmJldHRlcl9fdGl0bGVbZGF0YS10aXRsZT1cIicgKyBjdXJyZW50U2xpZGUgKyAnXCJdJykuaGlkZSgpO1xuICB0YXJnZXRTbGlkZXIuZmluZCgnLmJldHRlcl9fdGl0bGVbZGF0YS10aXRsZT1cIicgKyBuZXh0U2xpZGUgKyAnXCJdJykuc2hvdygpO1xuICB0YXJnZXRTbGlkZXIuZmluZCgnLmJldHRlcl9fd3JhcC10ZXh0W2RhdGEtdGV4dD1cIicgKyBjdXJyZW50U2xpZGUgKyAnXCJdJykuaGlkZSgpO1xuICB0YXJnZXRTbGlkZXIuZmluZCgnLmJldHRlcl9fd3JhcC10ZXh0W2RhdGEtdGV4dD1cIicgKyBuZXh0U2xpZGUgKyAnXCJdJykuc2hvdygpO1xuICB0b2dnbGVTdWJtZW51KGN1cnJlbnRTbGlkZSwgbmV4dFNsaWRlLCBudW1TbGlkZXIpO1xufVxuXG4kKCcuYmV0dGVyX19tZW51LWl0ZW0nKS5jbGljayhmdW5jdGlvbiAoZXZ0KSB7XG4gIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdiZXR0ZXJfX21lbnUtaXRlbS0tYWN0aXZlJykpIHtcbiAgICByZXR1cm47XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgbWVudUl0ZW0gPSAkKHRoaXMpLmRhdGEoKS5udW07XG4gICAgY29uc3QgdGFyZ2V0U2xpZGVyID0gJCgnLmJldHRlcl9fc2xpZGVyW2RhdGEtbnVtPVwiJyArIG1lbnVJdGVtICsgJ1wiXScpO1xuICAgIGNvbnN0IHRhcmdldENvbnRyb2wgPSAkKCcuYmV0dGVyX19jb250cm9sc1tkYXRhLW51bT1cIicgKyBtZW51SXRlbSArICdcIl0nKTtcblxuICAgICQoJy5iZXR0ZXInKS5maW5kKCcuYmV0dGVyX19zbGlkZXItLWFjdGl2ZScpLm9mZignYmVmb3JlQ2hhbmdlJywgYmVmb3JlQ2hhbmdlSGFuZGxlcik7IC8vINCj0LTQsNC70Y/QtdGCINGB0LvRg9GI0LDRgtC10LvRjCDRgdC80LXQvdGLINGB0LvQsNC50LTQsFxuICAgIHRhcmdldFNsaWRlci5vbignYmVmb3JlQ2hhbmdlJywgYmVmb3JlQ2hhbmdlSGFuZGxlcik7IC8vINCU0L7QsdCw0LLQu9GP0LXRgiDRgdC70YPRiNCw0YLQtdC70Ywg0YHQvNC10L3RiyDRgdC70LDQudC00LBcblxuICAgICQoJy5iZXR0ZXInKS5maW5kKCcuYmV0dGVyX19zbGlkZXItLWFjdGl2ZScpLnJlbW92ZUNsYXNzKCdiZXR0ZXJfX3NsaWRlci0tYWN0aXZlJyk7XG4gICAgJCgnLmJldHRlcicpLmZpbmQoJy5iZXR0ZXJfX21lbnUtaXRlbS0tYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2JldHRlcl9fbWVudS1pdGVtLS1hY3RpdmUnKTtcbiAgICAkKCcuYmV0dGVyJykuZmluZCgnLmJldHRlcl9fc3VibWVudS1pdGVtLS1hY3RpdmUnKS5yZW1vdmVDbGFzcygnYmV0dGVyX19zdWJtZW51LWl0ZW0tLWFjdGl2ZScpO1xuICAgICQoJy5iZXR0ZXInKS5maW5kKCcuYmV0dGVyX19jb250cm9scy0tYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2JldHRlcl9fY29udHJvbHMtLWFjdGl2ZScpO1xuXG4gICAgJCh0aGlzKS5hZGRDbGFzcygnYmV0dGVyX19tZW51LWl0ZW0tLWFjdGl2ZScpO1xuICAgIHRhcmdldFNsaWRlci5hZGRDbGFzcygnYmV0dGVyX19zbGlkZXItLWFjdGl2ZScpO1xuICAgIHRhcmdldENvbnRyb2wuYWRkQ2xhc3MoJ2JldHRlcl9fY29udHJvbHMtLWFjdGl2ZScpO1xuICAgICQoJy5iZXR0ZXInKS5maW5kKCcuYmV0dGVyX19zbGlkZXItLWFjdGl2ZScpLnNsaWNrKCdzbGlja0dvVG8nLCAwKTtcblxuICAgICQoJy5iZXR0ZXJfX21lbnUtaXRlbVtkYXRhLW51bT1cIicgKyBtZW51SXRlbSArICdcIl0nKS5maW5kKCcuYmV0dGVyX19zdWJtZW51LWl0ZW1bZGF0YS1zdWJudW09XCIwXCJdJykuYWRkQ2xhc3MoJ2JldHRlcl9fc3VibWVudS1pdGVtLS1hY3RpdmUnKTtcbiAgICB0YXJnZXRTbGlkZXIuc2xpY2soJ3JlZnJlc2gnKTtcbiAgfVxufSk7XG5cbiQoJy5iZXR0ZXJfX3N1Ym1lbnUtaXRlbScpLmNsaWNrKGZ1bmN0aW9uIChldnQpIHtcbiAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2JldHRlcl9fc3VibWVudS1pdGVtLS1hY3RpdmUnKSkge1xuICAgIHJldHVybjtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBzdWJtZW51SXRlbSA9ICQodGhpcykuZGF0YSgpLnN1Ym51bTtcblxuICAgICQoJy5iZXR0ZXInKS5maW5kKCcuYmV0dGVyX19zbGlkZXItLWFjdGl2ZScpLnNsaWNrKCdzbGlja0dvVG8nLCBzdWJtZW51SXRlbSk7XG5cbiAgICAkKCcuYmV0dGVyJykuZmluZCgnLmJldHRlcl9fc3VibWVudS1pdGVtLS1hY3RpdmUnKS5yZW1vdmVDbGFzcygnYmV0dGVyX19zdWJtZW51LWl0ZW0tLWFjdGl2ZScpO1xuICAgICQodGhpcykuYWRkQ2xhc3MoJ2JldHRlcl9fc3VibWVudS1pdGVtLS1hY3RpdmUnKTtcbiAgfVxufSk7XG4iXX0=
